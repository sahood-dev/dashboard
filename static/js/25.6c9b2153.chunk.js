"use strict";(self.webpackChunkproject_syncfusion_dashboard=self.webpackChunkproject_syncfusion_dashboard||[]).push([[25],{2325:function(e,t,i){i.d(t,{S:function(){return r},i:function(){return s}});var n=i(2619),a=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.moduleName="column",t}(n.bn),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.propertyName="columns",t.moduleName="columns",t}(n.bn)},3880:function(e,t,i){i.d(t,{C:function(){return ei}});var n=i(2791),a=i(9625),s=i(2866),r=i(4457),o=i(3554),l=i(7704),d="actionBegin",c="actionComplete",h="cardRendered",p="queryCellInfo",u="dataBound",f="content-ready",g="data-ready",m="dataStateChange",y=function(){function e(e){this.dataState={isPending:!1,resolver:null,isDataChanged:!1},this.parent=e,this.keyField=this.parent.cardSettings.headerField,this.dataState={isDataChanged:!1},this.isObservable=!1,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof r.h?e:new r.h(e),this.query=t instanceof o.A?t:new o.A,this.kanbanData=new r.h(this.parent.kanbanData)},e.prototype.getQuery=function(){return this.query.clone()},e.prototype.getData=function(e){if(this.parent.dataSource&&"result"in this.parent.dataSource){var t=this.eventPromise({requestType:""},e);return this.isObservable=!0,t.promise}return this.dataManager.executeQuery(e)},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getStateEventArgument=function(e){var t=new l.lM,i=new r.h({url:"",adaptor:new l.lM}),n=t.processQuery(i,e),s=JSON.parse(n.data);return(0,a.l7)(s,n.pvtData)},e.prototype.eventPromise=function(e,t,i){var n=this,s=e,o=this.getStateEventArgument(t),l=new r.B,d=new r.B;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(o.action=e,"cardChanged"===e.requestType||"cardRemoved"===e.requestType||"cardCreated"===e.requestType){var c=e;c.promise=d.promise,c.state=o,c.index=i,this.setState({isPending:!0,resolver:d.resolve}),s.endEdit=d.resolve,s.cancelEdit=d.reject,this.parent.trigger("dataSourceChanged",c),d.promise.then((function(){n.setState({isPending:!0,resolver:l.resolve}),n.parent.trigger(m,o),c.addedRecords.forEach((function(e){n.parent.kanbanData.push(e)})),c.changedRecords.forEach((function(e){var t=n.parent.kanbanData.filter((function(t){return t[n.parent.cardSettings.headerField]===e[n.parent.cardSettings.headerField]}))[0];(0,a.l7)(t,e)})),c.deletedRecords.forEach((function(e){var t=n.parent.kanbanData.findIndex((function(t){return t[n.parent.cardSettings.headerField]===e[n.parent.cardSettings.headerField]}));n.parent.kanbanData.splice(t,1)}))})).catch((function(){n.parent.hideSpinner()}))}else this.setState({isPending:!0,resolver:l.resolve}),this.parent.trigger(m,o);else this.setState({}),l.resolve(this.parent.dataSource);return l},e.prototype.getTable=function(){return this.parent.query?this.getQuery().fromTable:null},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.getQuery()).then((function(t){return e.dataManagerSuccess(t)})).catch((function(t){return e.dataManagerFailure(t)}))},e.prototype.dataManagerSuccess=function(e,t,i,n){var s=this;if(!this.parent.isDestroyed)if(t){var r=(0,a.l7)([],e.result,null,!0);this.parent.kanbanData=r,"cardCreated"===i.requestType?Array.isArray(e)?this.modifyArrayData(i.addedRecords,e):i.addedRecords[0]=(0,a.l7)(i.addedRecords[0],e):"cardChanged"===i.requestType?Array.isArray(e)?this.modifyArrayData(i.changedRecords,e):i.changedRecords[0]=(0,a.l7)(i.changedRecords[0],e):"cardRemoved"===i.requestType&&(Array.isArray(e)?this.modifyArrayData(i.deletedRecords,e):i.deletedRecords[0]=(0,a.l7)(i.deletedRecords[0],e)),this.refreshUI(i,n)}else this.parent.trigger("dataBinding",e,(function(e){var t=(0,a.l7)([],e.result,null,!0);s.parent.kanbanData=t,s.parent.notify(g,{processedData:t}),s.parent.trigger(u,null,(function(){return s.parent.hideSpinner()}))}))},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))},e.prototype.updateDataManager=function(e,t,i,n,a){var s,r=this;this.parent.showSpinner();var o={requestType:i,cancel:!1,addedRecords:t.addedRecords,changedRecords:t.changedRecords,deletedRecords:t.deletedRecords};this.eventPromise(o,this.query,a),this.parent.trigger(c,o,(function(i){if(!i.cancel){switch(e){case"insert":s=r.dataManager.insert(n,r.getTable(),r.getQuery());break;case"update":s=r.dataManager.update(r.keyField,n,r.getTable(),r.getQuery());break;case"delete":s=r.dataManager.remove(r.keyField,n,r.getTable(),r.getQuery());break;case"batch":s=r.dataManager.saveChanges(t,r.keyField,r.getTable(),r.getQuery())}r.dataManager.dataSource.offline?r.isObservable||(r.kanbanData=r.dataManager,r.parent.kanbanData=r.dataManager.dataSource.json,r.refreshUI(i,a)):s.then((function(){r.parent.isDestroyed||r.getData(r.getQuery()).then((function(e){return r.dataManagerSuccess(e,"DataSourceChange",i,a)})).catch((function(e){return r.dataManagerFailure(e)}))})).catch((function(e){r.dataManagerFailure(e)}))}}))},e.prototype.modifyArrayData=function(e,t){if(e.length===t.length)for(var i=0;i<t.length;i++)e[i]=(0,a.l7)(e[i],t[i]);return e},e.prototype.refreshUI=function(e,t){var i=this;this.parent.layoutModule.columnData=this.parent.layoutModule.getColumnCards(),this.parent.swimlaneSettings.keyField&&(this.parent.layoutModule.kanbanRows=this.parent.layoutModule.getRows(),this.parent.layoutModule.swimlaneData=this.parent.layoutModule.getSwimlaneCards()),e.addedRecords.forEach((function(e,n){i.parent.swimlaneSettings.keyField&&!e[i.parent.swimlaneSettings.keyField]&&(e[i.parent.swimlaneSettings.keyField]=""),i.parent.layoutModule.renderCardBasedOnIndex(e,t+n)})),e.changedRecords.forEach((function(e){i.parent.swimlaneSettings.keyField&&!e[i.parent.swimlaneSettings.keyField]&&(e[i.parent.swimlaneSettings.keyField]=""),i.parent.layoutModule.removeCard(e),i.parent.layoutModule.renderCardBasedOnIndex(e,t),i.parent.layoutModule.isSelectedCard&&i.parent.actionModule.SingleCardSelection(e),i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy&&"Descending"===i.parent.sortSettings.direction&&t>0&&--t})),e.deletedRecords.forEach((function(e){i.parent.layoutModule.removeCard(e)})),this.parent.layoutModule.refresh(),this.parent.renderTemplates(),this.parent.notify(f,{}),this.parent.trigger(u,e,(function(){return i.parent.hideSpinner()}))},e}(),v=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),b([(0,a.Z9)()],t.prototype,"keyField",void 0),b([(0,a.Z9)()],t.prototype,"textField",void 0),b([(0,a.Z9)(!1)],t.prototype,"showEmptyRow",void 0),b([(0,a.Z9)(!0)],t.prototype,"showItemCount",void 0),b([(0,a.Z9)(!1)],t.prototype,"allowDragAndDrop",void 0),b([(0,a.Z9)()],t.prototype,"template",void 0),b([(0,a.Z9)("Ascending")],t.prototype,"sortDirection",void 0),b([(0,a.Z9)()],t.prototype,"sortComparer",void 0),b([(0,a.Z9)(!0)],t.prototype,"showUnassignedRow",void 0),b([(0,a.Z9)(!1)],t.prototype,"enableFrozenRows",void 0),t}(a.rt),S=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),k=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),k([(0,a.Z9)(!0)],t.prototype,"showHeader",void 0),k([(0,a.Z9)()],t.prototype,"headerField",void 0),k([(0,a.Z9)()],t.prototype,"contentField",void 0),k([(0,a.Z9)()],t.prototype,"tagsField",void 0),k([(0,a.Z9)()],t.prototype,"grabberField",void 0),k([(0,a.Z9)()],t.prototype,"footerCssField",void 0),k([(0,a.Z9)()],t.prototype,"template",void 0),k([(0,a.Z9)("Single")],t.prototype,"selectionType",void 0),t}(a.rt),x=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),N=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),N([(0,a.Z9)()],t.prototype,"template",void 0),N([(0,a.Z9)([])],t.prototype,"fields",void 0),N([(0,a.Z9)(null)],t.prototype,"model",void 0),t}(a.rt),D=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),O([(0,a.Z9)()],t.prototype,"keyField",void 0),O([(0,a.Z9)()],t.prototype,"headerText",void 0),O([(0,a.Z9)()],t.prototype,"template",void 0),O([(0,a.Z9)(!1)],t.prototype,"allowToggle",void 0),O([(0,a.Z9)(!0)],t.prototype,"isExpanded",void 0),O([(0,a.Z9)()],t.prototype,"minCount",void 0),O([(0,a.Z9)()],t.prototype,"maxCount",void 0),O([(0,a.Z9)(!0)],t.prototype,"showItemCount",void 0),O([(0,a.Z9)(!1)],t.prototype,"showAddButton",void 0),O([(0,a.Z9)(!0)],t.prototype,"allowDrag",void 0),O([(0,a.Z9)(!0)],t.prototype,"allowDrop",void 0),O([(0,a.Z9)([])],t.prototype,"transitionColumns",void 0),t}(a.rt),T=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),L([(0,a.Z9)()],t.prototype,"text",void 0),L([(0,a.Z9)()],t.prototype,"keyFields",void 0),t}(a.rt),j=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),q=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),q([(0,a.Z9)("Index")],t.prototype,"sortBy",void 0),q([(0,a.Z9)()],t.prototype,"field",void 0),q([(0,a.Z9)("Ascending")],t.prototype,"direction",void 0),t}(a.rt),M="e-kanban",I="e-rtl",P="e-device",H="e-template",z="e-swimlane",B="e-kanban-table",Y="e-kanban-header",V="e-header-cells",_="e-header-wrap",Z="e-header-text",K="e-header-icon",W="e-content-cells",U="e-kanban-content",G="e-toggle-header",X="e-header-row",Q="e-content-row",J="e-swimlane-row",$="e-swimlane-row-expand",ee="e-swimlane-row-collapse",te="e-item-count",ie="e-card-wrapper",ne="e-card",ae="e-droppable",se="e-drag",re="e-drop",oe="e-empty-card",le="e-column-expand",de="e-column-collapse",ce="e-collapse-header-text",he="e-collapsed",pe="e-kanban-dialog",ue="e-kanban-form",fe="e-field",ge="e-target-dragged-clone",me="e-cloned-card",ye="e-kanban-dragged-card",ve="e-target-dropped-clone",be="e-dropping",Ce="e-toggle-visible",Se="e-multi-card-wrapper",ke="e-target-multi-clone",we="e-column-key",xe="e-selection",Ne="e-swimlane-header",Ae="e-swimlane-overlay",De="e-swimlane-content",Oe="e-limits",Ee="e-max-color",Te="e-min-color",Le="e-show-add-button",Fe="e-show-add-focus",je="e-frozen-swimlane-row",qe="e-frozen-row",Re=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var t=(0,a.oq)(e.target,".e-card,.e-header-icon,.e-content-row.e-swimlane-row,.e-show-add-button,.e-frozen-swimlane-row,.e-content-row:not(.e-swimlane-row) .e-content-cells");if(t)if(t.classList.contains(ne))this.parent.allowKeyboard&&this.parent.keyboardModule.cardTabIndexRemove(),this.cardClick(e);else if(t.classList.contains(K))this.columnExpandCollapse(e);else if(t.classList.contains(Q)&&t.classList.contains(J))this.rowExpandCollapse(e);else if(t.classList.contains(Le))this.addButtonClick(t);else if(t.classList.contains(je)){var i=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),n=this.parent.layoutModule.frozenSwimlaneRow.querySelector(".e-icons");this.rowExpandCollapse(e,i[this.parent.layoutModule.frozenOrder]),!!n.classList.contains(ee)?(0,a.s1)(n,[$],[ee]):(0,a.s1)(n,[ee],[$])}},e.prototype.addButtonClick=function(e){var t=this,i={};if(0===this.parent.kanbanData.length)i[this.parent.cardSettings.headerField]=1;else if("number"===typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]){var n=this.parent.kanbanData.map((function(e){return parseInt(e[t.parent.cardSettings.headerField],10)}));i[this.parent.cardSettings.headerField]=Math.max.apply(Math,n)+1}if(i[this.parent.keyField]=(0,a.oq)(e,".e-content-cells").getAttribute("data-key"),"Index"===this.parent.sortSettings.sortBy&&(i[this.parent.sortSettings.field]=1,(0,a.oq)(e,".e-content-cells").querySelector(".e-card"))){var s="Ascending"===this.parent.sortSettings.direction?e.nextElementSibling.lastElementChild:e.nextElementSibling.firstElementChild,r=this.parent.getCardDetails(s);i[this.parent.sortSettings.field]=r[this.parent.sortSettings.field]+1}0!==this.parent.kanbanData.length&&this.parent.swimlaneSettings.keyField&&(0,a.oq)(e,".e-content-row").previousElementSibling&&(i[this.parent.swimlaneSettings.keyField]=(0,a.oq)(e,".e-content-row").previousElementSibling.getAttribute("data-key")),this.parent.openDialog("Add",i)},e.prototype.doubleClickHandler=function(e){(0,a.oq)(e.target,".e-card")&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e,t){var i=this,n=(0,a.oq)(t||e.target,".e-card"),s=this.parent.getCardDetails(n);if(s){this.parent.activeCardData={data:s,element:n};var r={data:s,element:n,cancel:!1,event:e};this.parent.trigger("cardClick",r,(function(t){if(!t.cancel){if(n.classList.contains(xe)&&"click"===e.type)(0,a.IV)([n],xe),i.parent.layoutModule.disableAttributeSelection(n);else{var s=e.ctrlKey;i.parent.isAdaptive&&i.parent.touchModule&&(s=i.parent.touchModule.mobilePopup&&i.parent.touchModule.tabHold||s),i.cardSelection(n,s,e.shiftKey)}i.parent.isAdaptive&&i.parent.touchModule&&i.parent.touchModule.updatePopupContent();var r=(0,a.oq)(n,".e-content-cells");if(i.parent.allowKeyboard)[].slice.call(r.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")})),i.parent.keyboardModule.addRemoveTabIndex("Remove")}}))}},e.prototype.cardDoubleClick=function(e){var t=this,i=(0,a.oq)(e.target,".e-card"),n=this.parent.getCardDetails(i);this.parent.activeCardData={data:n,element:i},this.cardSelection(i,!1,!1);var s={data:n,element:i,cancel:!1,event:e};this.parent.trigger("cardDoubleClick",s,(function(e){e.cancel||t.parent.dialogModule.openDialog("Edit",s.data)}))},e.prototype.rowExpandCollapse=function(e,t){var i=this,n=e instanceof HTMLElement?e:e.target,s=(0,a.le)(t)?n:t,r={cancel:!1,target:n,requestType:"rowExpandCollapse"};this.parent.trigger(d,r,(function(e){if(!e.cancel){var t,r=(0,a.oq)(s,".e-swimlane-row"),o=r.getAttribute("data-key"),l=i.parent.element.querySelector(".e-content-row:nth-child("+(r.rowIndex+2)+")"),d=r.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse"),h=!!r.classList.contains(he);h?((0,a.IV)([l,r],he),(0,a.s1)(d,[$],[ee]),i.parent.swimlaneToggleArray.splice(i.parent.swimlaneToggleArray.indexOf(o),1),t="0"):((0,a.cn)([l,r],he),(0,a.s1)(d,[ee],[$]),i.parent.swimlaneToggleArray.push(o),t="-1"),d.setAttribute("aria-label",h?o+" Expand":o+" Collapse"),r.setAttribute("aria-expanded",h.toString()),l.setAttribute("aria-expanded",h.toString()),[].slice.call(l.querySelectorAll(".e-content-cells")).forEach((function(e){e.setAttribute("tabindex",t)})),i.parent.notify(f,{}),i.parent.trigger(c,{target:n,requestType:"rowExpandCollapse"})}}))},e.prototype.columnExpandCollapse=function(e){var t=this,i=e instanceof HTMLElement?e:e.target,n={cancel:!1,target:i,requestType:"columnExpandCollapse"};this.parent.trigger(d,n,(function(e){if(!e.cancel){var n=(0,a.oq)(i,".e-header-cells"),s=n.cellIndex;t.columnToggle(n);var r=t.parent.element.querySelectorAll(".e-header-cells.e-collapsed").length;if(r===t.parent.columns.length-t.hideColumnKeys.length){var o=".e-header-cells:not(.e-stacked-header-cell):nth-child("+(s+1===r?1:s+2)+")",l=t.parent.element.querySelector(o);(0,a.cn)([l],he),t.columnToggle(l)}t.parent.notify(f,{}),t.parent.trigger(c,{target:i,requestType:"columnExpandCollapse"})}}))},e.prototype.columnToggle=function(e){var t=this,i=e.cellIndex,n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),s=".e-kanban-table col:nth-child("+(i+1)+")",r=e.querySelector(".e-column-expand,.e-column-collapse"),o=[].slice.call(this.parent.element.querySelectorAll(s));if(e.classList.contains(he)){(0,a.IV)(o,he),this.parent.isAdaptive&&o.forEach((function(e){return e.style.width=(0,a.Ac)(t.parent.layoutModule.getWidth())})),(0,a.s1)(r,[le],[de]);for(var l=function(t){var n=t.querySelector(".e-content-cells:nth-child("+(i+1)+")");(0,a.IV)([n,e],he),(0,a.Od)(n.querySelector(".e-collapse-header-text")),e.setAttribute("aria-expanded","true"),n.setAttribute("aria-expanded","true"),[].slice.call(n.parentElement.querySelectorAll(".e-collapsed")).forEach((function(e){var t=e.querySelector(".e-collapse-header-text");t.style.height="auto",t&&n.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=n.getBoundingClientRect().height-4+"px")}))},d=0,c=n;d<c.length;d++){l(c[d])}this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[i].setProperties({isExpanded:!0},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")}else{(0,a.cn)(o,he),this.parent.isAdaptive&&o.forEach((function(e){return e.style.width=(0,a.Ac)(50)})),(0,a.s1)(r,[de],[le]);for(var h=e.getAttribute("data-key"),p=function(t){var i=t.querySelector('.e-content-cells[data-key="'+h+'"]'),n=i.cellIndex,s=(u.parent.columns[n].showItemCount?"["+i.querySelectorAll(".e-card").length+"] ":"")+u.parent.columns[n].headerText;i.appendChild((0,a.az)("div",{className:ce,innerHTML:s})),(0,a.cn)([i,e],he),e.setAttribute("aria-expanded","false"),i.setAttribute("aria-expanded","false"),[].slice.call(i.parentElement.querySelectorAll(".e-collapsed")).forEach((function(e){var t=e.querySelector(".e-collapse-header-text");t&&i.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=i.getBoundingClientRect().height-4+"px")}))},u=this,f=0,g=n;f<g.length;f++){p(g[f])}this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[i].setProperties({isExpanded:!1},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",h+" Collapse")}},e.prototype.cardSelection=function(e,t,i){var n=this;if(e){var s=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var r=(0,a.oq)(e,".e-content-row");if(((0,a.le)(this.lastSelectionRow)?r.rowIndex:this.lastSelectionRow.rowIndex)!==r.rowIndex&&(t||i)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===s.length||t&&"Single"!==this.parent.cardSettings.selectionType||((0,a.IV)(s,xe),this.parent.layoutModule.disableAttributeSelection(s),s.forEach((function(e){n.selectionArray.splice(n.selectionArray.indexOf(e.getAttribute("data-id")),1),n.selectedCardsElement.splice(n.selectedCardsElement.indexOf(e),1),n.selectedCardsData.splice(n.selectedCardsData.indexOf(n.parent.getCardDetails(e),1))}))),s.length>0&&i&&"Multiple"===this.parent.cardSettings.selectionType){var o=[],l=void 0,d=void 0,c=void 0,h=[].slice.call(r.querySelectorAll(".e-card"));h.forEach((function(e){return o.push(e.getAttribute("data-id"))}));var p=e.getAttribute("data-id"),u=this.lastCard.getAttribute("data-id"),f=d=o.indexOf(p),g=l=o.indexOf(u),m=f>g?"next":"prev";for("prev"===m&&(l=f,d=g),c=l;c<=d;c++){var y=h[c];(0,a.cn)([y],xe),y.setAttribute("aria-selected","true"),y.setAttribute("tabindex","0"),this.selectionArray.push(y.getAttribute("data-id")),this.selectedCardsElement.push(y),this.selectedCardsData.push(this.parent.getCardDetails(y)),this.lastCardSelection=y,"prev"===m&&(this.lastCardSelection=h[l])}}else if((0,a.cn)([e],xe),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=(0,a.oq)(e,".e-content-row"),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains(ee)&&this.rowExpandCollapse(v)}}}},e.prototype.addColumn=function(e,t){var i=(0,a.Fs)(E,[this.parent,"columns",e,!0]);this.parent.columns.splice(t,0,i),this.parent.notify(g,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll(".e-header-cells").item(e);t&&t.classList.contains(G)&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?((0,a.og)(this.parent.element.querySelector("."+Y)),(0,a.og)(this.parent.element.querySelector("."+U))):this.parent.notify(g,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e.toString());-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(g,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e.toString()),this.parent.notify(g,{processedData:this.parent.kanbanData})},e.prototype.SingleCardSelection=function(e){if("None"!==this.parent.cardSettings.selectionType&&e[this.parent.cardSettings.headerField]){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField].toString()+'"]');t&&((0,a.cn)([t],xe),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","0"))}},e}(),Me=function(){function e(e){this.parent=e}return e.prototype.addCard=function(e,t){var i=this,n={cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]};this.parent.trigger(d,n,(function(n){if(!n.cancel){var a=[];i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy&&(e instanceof Array?a=e:a.push(e),a.forEach((function(e,t){if(!e[i.parent.sortSettings.field]){var n=i.parent.getColumnData(e[i.parent.keyField]);"Ascending"===i.parent.sortSettings.direction&&n.length>0?e[i.parent.sortSettings.field]=n[n.length-1][i.parent.sortSettings.field]+t+1:"Descending"===i.parent.sortSettings.direction&&n.length>0&&(e[i.parent.sortSettings.field]=n[0][i.parent.sortSettings.field]+t+1),0===n.length&&(e[i.parent.sortSettings.field]=1)}})),e instanceof Array||t||"Descending"!==i.parent.sortSettings.direction||i.parent.getColumnData(a[0][i.parent.keyField]).filter((function(e,n){e[i.parent.sortSettings.field]===a[0][i.parent.sortSettings.field]&&(t=n+1)})),0===t||t||"Descending"!==i.parent.sortSettings.direction||(t=0),a=i.priorityOrder(a,t));var s={addedRecords:e instanceof Array?e:[e],changedRecords:i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy?a:[],deletedRecords:[]},r=e instanceof Array||a.length>0?"batch":"insert";i.parent.dataModule.updateDataManager(r,s,"cardCreated",e,t)}}))},e.prototype.getIndexFromData=function(e){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField]+'"]'),i=(0,a.oq)(t,".e-content-cells");return[].slice.call(i.querySelectorAll(".e-card")).indexOf(t)},e.prototype.updateCard=function(e,t){var i=this,n={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};t=(0,a.le)(t)?this.getIndexFromData(n.changedRecords[0]):t,this.parent.trigger(d,n,(function(n){if(!n.cancel){if(i.parent.sortSettings.field&&"Index"===i.parent.sortSettings.sortBy){var a=[];e instanceof Array?a=e:a.push(e),e=i.priorityOrder(a,t)}var s={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]},r=e instanceof Array?"batch":"update";i.parent.dataModule.updateDataManager(r,s,"cardChanged",e,t)}}))},e.prototype.deleteCard=function(e){var t=this,i={addedRecords:[],changedRecords:[],deletedRecords:[]};i.deletedRecords="string"===typeof e||"number"===typeof e?this.parent.kanbanData.filter((function(i){return i[t.parent.cardSettings.headerField]===e})):e instanceof Array?e:[e];var n={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:i.deletedRecords};this.parent.trigger(d,n,(function(e){if(!e.cancel){var n=i.deletedRecords.length>1?"batch":"delete",a=i.deletedRecords;t.parent.dataModule.updateDataManager(n,i,"cardRemoved",a[0])}}))},e.prototype.priorityOrder=function(e,t){for(var i,n=this,s=e.map((function(e){return e[n.parent.cardSettings.headerField]})),r=e[e.length-1][this.parent.sortSettings.field],o=e.map((function(e){return e[n.parent.keyField]})),l=o.filter((function(e,t){return o.indexOf(e)===t})).sort(),d=[],c=[],h=function(o){var l=e.filter((function(e){return e[n.parent.keyField]===o}));i=p.parent.layoutModule.getColumnData(o);for(var h=0,u=l;h<u.length;h++){var f=u[h];if(p.parent.swimlaneSettings.keyField){var g=p.parent.getSwimlaneData(f[p.parent.swimlaneSettings.keyField]);i=p.parent.getColumnData(o,g)}}if(l.forEach((function(e){return d.push(e)})),!(0,a.le)(t)){for(var m=function(e){i.filter((function(i,a){i[n.parent.cardSettings.headerField]===s[e]&&a<=t&&c.push(a)}))},y=0;y<s.length;y++)m(y);if(c.length>0&&(t+=c.length),"Ascending"===p.parent.sortSettings.direction)for(var v=t;v<i.length;v++)-1===s.indexOf(i[v][p.parent.cardSettings.headerField])&&(i[v][p.parent.sortSettings.field]=++r,d.push(i[v]));else for(v=t-1;v>=0;v--)-1===s.indexOf(i[v][p.parent.cardSettings.headerField])&&(i[v][p.parent.sortSettings.field]=++r,d.push(i[v]))}},p=this,u=0,f=l;u<f.length;u++){h(f[u])}return d},e}(),Ie=function(){function e(e){this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isDragging=!1,this.isExternalDrop=!1}return e.prototype.wireDragEvents=function(e){var t;null!=!this.parent.element&&0===this.parent.externalDropId.length&&(t=this.parent.element.querySelector("."+U)),this.dragObj.instance=new a._l(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:t,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=(0,a.oq)(e.sender.target,".e-card"),(0,a.le)(this.dragObj.element))return null;this.dragObj.element.style.width=(0,a.Ac)(this.dragObj.element.offsetWidth);var t=(0,a.az)("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=t.children.item(0),(0,a.cn)([this.dragObj.cloneElement],me),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=(0,a.az)("div",{className:ke}),this.dragObj.targetClone=(0,a.az)("div",{className:ve,styles:"width:100%;height:"+(0,a.Ac)(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},e.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains(xe)){var i=(0,a.oq)(this.dragObj.element,".e-content-row");this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)")),this.dragObj.selectedCards.forEach((function(e){t.dragObj.cardDetails.push(t.parent.getCardDetails(e))}))}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];var n={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",n,(function(i){if(i.cancel)return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.element.classList.contains(xe)){if(t.dragObj.selectedCards.forEach((function(e){t.draggedClone(e)})),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var n=(0,a.az)("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(n),(0,a.s1)(t.dragObj.cloneElement,["e-multi-card-clone"],[xe]),t.parent.layoutModule.disableAttributeSelection(t.dragObj.cloneElement),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);a.bi.add(document.body,"keydown",t.keydownHandler,t),t.parent.notify(f,{})}))},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=(0,a.az)("div",{className:ge,styles:"width:"+(0,a.Ac)(e.offsetWidth-1)+";height:"+(0,a.Ac)(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),(0,a.cn)([e],ye)},e.prototype.drag=function(e){var t=this;if(e.target){var i=(0,a.oq)(e.target,".e-kanban .e-card"),n=i||e.target,s=(0,a.oq)(n,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");if(this.externalDrop(n),this.kanbanObj=this.parent.isExternalKanbanDrop?this.parent.externalDropObj:this.parent,this.calculateArgs(e),s&&"not-allowed"!==document.body.style.cursor){var r=this.getColumnKey(s),o=r.split(",");this.multiCloneRemove();var l=r===this.getColumnKey((0,a.oq)(this.dragObj.draggedClone,".e-content-cells"));if(1===o.length||l)if(n.classList.contains(ge)&&this.removeElement(this.dragObj.targetClone,this.kanbanObj),n.classList.contains(ne)){var d=n.classList.contains(ge)&&n.previousElementSibling.classList.contains(ye)?null:n.previousElementSibling,c="afterend";if((0,a.le)(d)){var h=n.classList.contains(ge)?this.dragObj.pageY/2:this.dragObj.pageY,p=n.classList.contains(ge)?n.offsetHeight:n.offsetHeight/2;h-(this.kanbanObj.element.getBoundingClientRect().top+n.offsetTop)<p&&(c="beforebegin")}n.insertAdjacentElement(c,this.dragObj.targetClone)}else if(n.classList.contains(W)&&!(0,a.oq)(n,".e-swimlane-row")){if(0!==n.querySelectorAll("."+ye).length&&0===n.querySelectorAll(".e-card:not(.e-kanban-dragged-card):not(.e-cloned-card)").length)return;n.querySelector(".e-card-wrapper").appendChild(this.dragObj.targetClone)}else n.classList.contains(ie)&&!(0,a.oq)(n,".e-swimlane-row")&&0===s.querySelectorAll(".e-card").length&&n.appendChild(this.dragObj.targetClone);else o.length>1&&s.classList.contains(be)&&this.multiCloneCreate(o,s);this.kanbanObj.notify(f,{})}0===this.kanbanObj.element.querySelectorAll(".e-dropping").length&&this.cellDropping();var u=!1;s&&(u=s.classList.contains(he)&&s.classList.contains(be)),u&&(this.toggleVisible(n),(0,a.cn)([s],Ce));var g=[].slice.call(this.kanbanObj.element.querySelectorAll(".e-toggle-visible"));g.length>0&&!n.classList.contains(Ce)&&!(0,a.oq)(n,".e-toggle-visible")&&(this.toggleVisible(n,g.slice(-1)[0]),(0,a.IV)(g,Ce)),this.kanbanObj.notify(f,{});var m=(0,a.oq)(n,".e-column-key");if(m){var y=[].slice.call(this.kanbanObj.element.querySelectorAll(".e-column-key:not(.e-disabled)")).filter((function(e){return t.getColumnKey(e)===t.getColumnKey(m)}));y.length>0&&((0,a.cn)(y,"e-multi-active"),y[0].previousElementSibling&&(0,a.cn)([y[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=s&&s.classList.contains(be)?"":"not-allowed",i&&!(0,a.oq)(i,".e-content-cells").classList.contains(be)&&(i.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.multiCloneRemove()),this.updateScrollPosition();var v={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.kanbanObj.trigger("drag",v),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},e.prototype.removeElement=function(e,t){(t=t||this.parent).element.getElementsByClassName(e.className).length>0&&(0,a.Od)(e)},e.prototype.externalDrop=function(e){var t=this;this.parent.externalDropId.forEach((function(i){var n=(0,a.oq)(e,i);if(n)if(n.classList.contains("e-kanban")){t.parent.externalDropObj=document.querySelector(i).ej2_instances[0],t.parent.isExternalKanbanDrop=!0;var s=[].slice.call(t.parent.externalDropObj.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));(0,a.cn)(s,be)}else t.isExternalDrop=!0}))},e.prototype.multiCloneCreate=function(e,t){var i=t.offsetHeight,n=t.querySelector(".e-limits");n&&(i-=n.offsetHeight),this.dragObj.targetCloneMulti.style.height=(0,a.Ac)(i),t.querySelector("."+Le)&&(0,a.cn)([t.querySelector("."+Le)],Se),(0,a.cn)([t.querySelector(".e-card-wrapper")],Se),t.querySelector(".e-card-wrapper").style.height="auto",t.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var s=0,r=e;s<r.length;s++){var o=r[s],l=(0,a.oq)(this.dragObj.draggedClone,".e-content-cells"),d=this.kanbanObj.columns[l.cellIndex].transitionColumns,c=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),o,d),h=c?"":" e-disabled",p=(0,a.az)("div",{className:we+h,attrs:{"data-key":o.trim()}}),u=(0,a.az)("div",{className:"e-text",innerHTML:o.trim()});t.appendChild(this.dragObj.targetCloneMulti).appendChild(p).appendChild(u),p.style.cursor=c?"":"not-allowed",p.style.lineHeight=p.style.height=(0,a.Ac)(i/e.length),u.style.top=(0,a.Ac)(i/2-u.offsetHeight/2)}},e.prototype.allowedTransition=function(e,t,i){for(var n=!0,a=t.split(","),s=0;s<a.length;s++){if(e===a[s].trim())return!0;if(i){if(1===i.length&&0===i[0].length)return!0;for(var r=0;r<i.length;r++){if(a[s].trim()===i[r].trim())return!0;n=!1}}}return n},e.prototype.cellDropping=function(){var e=this,t=(0,a.oq)(this.dragObj.draggedClone,".e-content-cells"),i=(0,a.oq)(this.dragObj.draggedClone,".e-content-row");if(this.addDropping(i,t),t&&t.classList.contains(re)&&(0,a.cn)([t],be),this.kanbanObj.swimlaneSettings.keyField&&this.kanbanObj.swimlaneSettings.allowDragAndDrop){var n=[].slice.call(this.kanbanObj.element.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)"));[].slice.call(n).forEach((function(n){i!==n&&e.addDropping(n,t)}))}},e.prototype.addDropping=function(e,t){var i=this;t&&e&&[].slice.call(e.children).forEach((function(e){var n=i.kanbanObj.columns[t.cellIndex].transitionColumns;e!==t&&e.classList.contains(re)&&i.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),n)&&(0,a.cn)([e],be)}))},e.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(a.bi.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear(),this.dragStopPostClear())},e.prototype.dragStop=function(e){var t,i,n,s=this,r=(0,a.oq)(this.dragObj.targetClone,".e-content-cells");if(a.bi.remove(document.body,"keydown",this.keydownHandler),this.dragObj.targetClone.parentElement){i=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(".e-card:not(.e-kanban-dragged-card),.e-target-dropped-clone")).indexOf(this.dragObj.targetClone)}(!(0,a.le)(this.kanbanObj)&&this.kanbanObj.element.querySelector(".e-target-multi-clone")&&(t=(0,a.oq)(e.target,".e-column-key:not(.e-disabled)")),r||t)&&(r?n=this.getColumnKey(r):(n=this.getColumnKey(t),r=(0,a.oq)(t,".e-content-cells")),this.dragObj.selectedCards instanceof HTMLElement?this.updateDroppedData(this.dragObj.selectedCards,n,r):this.dragObj.selectedCards.forEach((function(e){s.updateDroppedData(e,n,r)})),this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&this.changeOrder(this.dragObj.modifiedData));0===this.dragObj.modifiedData.length&&(this.dragObj.modifiedData=this.dragObj.cardDetails);var o={cancel:!1,data:this.dragObj.modifiedData,event:e,element:this.dragObj.selectedCards,dropIndex:i};this.parent.trigger("dragStop",o,(function(e){if(s.dragStopClear(),!e.cancel&&(r||t)){var i=e.data instanceof Array&&e.data.length>1?e.data:e.data[0];s.parent.crudModule.updateCard(i,e.dropIndex)}s.dragStopPostClear()}))},e.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll("."+ge)).forEach((function(e){(0,a.Od)(e)})),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?(0,a.IV)([this.dragObj.selectedCards],ye):(0,a.IV)(this.dragObj.selectedCards,ye),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach((function(e){e.style.cursor=""}));var e=".e-content-row:not(.e-swimlane-row)";([].slice.call(this.parent.element.querySelectorAll(e+" ."+W)).forEach((function(e){return(0,a.IV)([e],be)})),this.parent.externalDropObj)&&[].slice.call(this.parent.externalDropObj.element.querySelectorAll(e+" ."+W)).forEach((function(e){return(0,a.IV)([e],be)}))},e.prototype.dragStopPostClear=function(){this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.parent.externalDropObj=null},e.prototype.updateDroppedData=function(e,t,i){var n=this.parent.getCardDetails(e),s=(0,a.l7)({},n,null,!0);if(1===t.split(",").length&&(s[this.parent.keyField]=t),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var r=(0,a.oq)(i,".e-content-row").previousElementSibling;if(this.parent.isAdaptive){var o=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;s[this.parent.swimlaneSettings.keyField]=o}else s[this.parent.swimlaneSettings.keyField]=this.getColumnKey(r)}this.dragObj.modifiedData.push(s)},e.prototype.changeOrder=function(e){var t=this,i=!1,n="Ascending"===this.kanbanObj.sortSettings.direction?this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling;if(!n||n.classList.contains(ye)||n.classList.contains(me)||n.classList.contains(ge))if(this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.kanbanObj.sortSettings.direction)n=this.dragObj.targetClone.nextElementSibling;else{if(!this.dragObj.targetClone.previousElementSibling||"Descending"!==this.kanbanObj.sortSettings.direction)return;n=this.dragObj.targetClone.previousElementSibling}else i=!0;if(n.classList.contains(ne)){var a=this.kanbanObj.getCardDetails(n)[this.kanbanObj.sortSettings.field];e.length>1&&"Descending"===this.kanbanObj.sortSettings.direction&&(e=e.reverse()),e.forEach((function(e,n){i?e[t.kanbanObj.sortSettings.field]=++a:1!==a&&n<=e[t.kanbanObj.sortSettings.field]?e[t.kanbanObj.sortSettings.field]=--a:1===a&&(e[t.kanbanObj.sortSettings.field]=n+1)}))}},e.prototype.toggleVisible=function(e,t){var i=this;[].slice.call(this.kanbanObj.element.querySelectorAll(".e-header-cells:not(.e-stacked-header-cell)")).forEach((function(n){i.getColumnKey(n)===i.getColumnKey(t||e)&&i.kanbanObj.actionModule.columnToggle(n)}));var n=(0,a.oq)(this.dragObj.draggedClone,".e-content-cells");if(n){var s=(0,a.Ac)(n.offsetWidth-16);this.dragObj.draggedClone.style.width=s,this.dragObj.cloneElement.style.width=s}},e.prototype.multiCloneRemove=function(){var e=[].slice.call(this.kanbanObj.element.querySelectorAll(".e-target-multi-clone"));e.length>0&&([].slice.call(this.kanbanObj.element.querySelectorAll(".e-column-key")).forEach((function(e){return(0,a.Od)(e)})),e.forEach((function(e){var t=(0,a.oq)(e,".e-content-cells");t&&(t.style.borderStyle="",t.querySelector("."+Le)&&(0,a.IV)([t.querySelector("."+Le)],Se),(0,a.IV)([t.querySelector(".e-card-wrapper")],Se))})),this.removeElement(this.dragObj.targetCloneMulti,this.kanbanObj))},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0,this.kanbanObj.isAdaptive&&this.kanbanObj.tooltipModule&&this.kanbanObj.tooltipModule.tooltipObj.close()},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(){var e=this;(0,a.le)(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){e.autoScroll()}),100))},e.prototype.autoScrollValidation=function(){var e=this.dragObj.pageY,t=this.dragObj.pageX,i={left:!1,right:!1,top:!1,bottom:!1},n=this.kanbanObj.element.querySelector("."+U).getBoundingClientRect();e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),this.dragEdges=i},e.prototype.autoScroll=function(){this.autoScrollValidation();var e=30;if(this.kanbanObj.isAdaptive){var t;if(this.dragEdges.top||this.dragEdges.bottom?t=this.dragObj.targetClone?(0,a.oq)(this.dragObj.targetClone,".e-card-wrapper"):(0,a.oq)(this.dragObj.draggedClone,".e-card-wrapper"):(this.dragEdges.right||this.dragEdges.left)&&(t=this.kanbanObj.element.querySelector("."+U)),t){var i=t.offsetHeight<=t.scrollHeight,n=t.offsetWidth<=t.scrollWidth,s=t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,r=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;if(i&&s&&(this.dragEdges.top||this.dragEdges.bottom)&&(t.scrollTop+=this.dragEdges.top?-66:e),n&&r&&(this.dragEdges.left||this.dragEdges.right))(this.kanbanObj.layoutModule.getWidth()*(this.kanbanObj.columns.length-1)>t.scrollLeft||this.dragEdges.left)&&(t.scrollLeft+=this.dragEdges.left?-30:e)}}else{var o=this.kanbanObj.element.querySelector("."+U),l=this.dragObj.targetClone.parentElement,d=o.offsetHeight<=o.scrollHeight,c=o.offsetWidth<=o.scrollWidth,h=d&&o.scrollTop>=0&&o.scrollTop+o.offsetHeight<=o.scrollHeight,p=c&&o.scrollLeft>=0&&o.scrollLeft+o.offsetWidth<=o.scrollWidth;h&&(this.dragEdges.top||this.dragEdges.bottom)&&(o.scrollTop+=this.dragEdges.top?-30:e,l&&(l.scrollTop+=this.dragEdges.top?-30:e)),p&&(this.dragEdges.left||this.dragEdges.right)&&(o.scrollLeft+=this.dragEdges.left?-30:e,l&&(l.scrollLeft+=this.dragEdges.left?-30:e)),this.dragObj.pageY-window.scrollY<e?window.scrollTo(window.scrollX,window.scrollY-e):window.innerHeight-(this.dragObj.pageY-window.scrollY)<e&&window.scrollTo(window.scrollX,window.scrollY+e)}},e.prototype.unWireDragEvents=function(e){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()},e}(),Pe=i(2227),He=i(5628),ze=i(7505),Be=i(942),Ye=i(3710),Ve=function(){function e(e){this.preventUpdate=!1,this.parent=e}return e.prototype.openDialog=function(e,t){this.action=e,this.parent.activeCardData.data=t,this.renderDialog(t,e),this.dialogObj.show()},e.prototype.closeDialog=function(){this.dialogObj.hide()},e.prototype.renderDialog=function(e,t){this.element=(0,a.az)("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var i={buttons:this.getDialogButtons(t),content:this.getDialogContent(e,t),cssClass:pe,enableRtl:this.parent.enableRtl,header:this.parent.localeObj.getConstant("Add"===t?"addTitle":"Edit"===t?"editTitle":"deleteTitle"),height:"auto",isModal:!0,showCloseIcon:!0,width:"Delete"===t?400:350,visible:!1,beforeOpen:this.onBeforeDialogOpen.bind(this),beforeClose:this.onBeforeDialogClose.bind(this)};this.dialogObj=new Ye.Vq((0,a.l7)(i,"Delete"!==t&&this.parent.dialogSettings.model||{}),this.element),"Delete"!==t&&this.applyFormValidation(),this.dialogObj.element.querySelector(".e-dlg-closeicon-btn").title=this.parent.localeObj.getConstant("close")},e.prototype.getDialogContent=function(e,t){if("Delete"===t)return this.parent.localeObj.getConstant("deleteContent");var i=(0,a.az)("div",{className:"e-kanban-form-wrapper"}),n=(0,a.az)("form",{id:this.parent.element.id+"EditForm",className:ue,attrs:{onsubmit:"return false;"}});if(this.parent.dialogSettings.template){e&&(this.destroyComponents(),[].slice.call(n.childNodes).forEach((function(e){return(0,a.Od)(e)})));var s=this.parent.element.id+"_dialogTemplate",r=this.parent.templateParser(this.parent.dialogSettings.template)(e,this.parent,"dialogTemplate",s,!1);(0,a.R3)(r,n),this.parent.renderTemplates()}else{var o=(0,a.az)("div",{className:"e-kanban-dialog-content"});n.appendChild(o);var l=(0,a.az)("table");o.appendChild(l);for(var d=0,c=this.getDialogFields();d<c.length;d++){var h=c[d],p=(0,a.az)("tr");l.appendChild(p),p.appendChild((0,a.az)("td",{className:"e-label",innerHTML:h.text?h.text:h.key}));var u=(0,a.az)("td");p.appendChild(u),u.appendChild(this.renderComponents(h))}}return i.appendChild(n),i},e.prototype.getDialogFields=function(){var e=this.parent.dialogSettings.fields;return 0===e.length&&(e=[{text:"ID",key:this.parent.cardSettings.headerField,type:"TextBox"},{key:this.parent.keyField,type:"DropDown"},{key:this.parent.cardSettings.contentField,type:"TextArea"}],this.parent.sortSettings.field&&e.splice(e.length-1,0,{key:this.parent.sortSettings.field,type:"TextBox"}),this.parent.swimlaneSettings.keyField&&e.splice(e.length-1,0,{key:this.parent.swimlaneSettings.keyField,type:"DropDown"})),e},e.prototype.getDialogButtons=function(e){var t="Delete"===e?"e-dialog-no":"e-dialog-cancel",i=[{buttonModel:{cssClass:"e-flat "+("Delete"===e?"e-dialog-yes":"Add"===e?"e-dialog-add":"e-dialog-edit"),isPrimary:!0,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"save":"yes")},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-flat "+t,isPrimary:!1,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"cancel":"no")},click:this.dialogButtonClick.bind(this)}];if("Edit"===e){var n={buttonModel:{cssClass:"e-flat e-dialog-delete",isPrimary:!1,content:this.parent.localeObj.getConstant("delete")},click:this.dialogButtonClick.bind(this)};i.splice(0,0,n)}return i},e.prototype.renderComponents=function(e){var t,i,n,s=(0,a.az)("div",{className:e.key+"_wrapper"}),r=(0,a.az)("input",{className:fe,attrs:{name:e.key}});s.appendChild(r);var o=this.parent.activeCardData.data?this.parent.activeCardData.data[e.key]:null;switch(e.type){case"DropDown":if(e.key===this.parent.keyField){var l=this.parent.layoutModule.columnKeys;if(this.parent.actionModule.hideColumnKeys.length>0){l=[];for(var d=0;d<this.parent.columns.length;d++){if(this.parent.layoutModule.isColumnVisible(this.parent.columns[d]))l="number"===typeof this.parent.columns[d].keyField?l.concat(this.parent.columns[d].keyField.toString()):l.concat(this.parent.columns[d].keyField.split(",").map((function(e){return e.trim()})))}}i={dataSource:l,value:o?o.toString():o}}else e.key===this.parent.swimlaneSettings.keyField&&(i={dataSource:[].slice.call(this.parent.layoutModule.kanbanRows),fields:{text:"textField",value:"keyField"},value:o});n=new Pe.N(i);break;case"Numeric":n=new He.N({value:o});break;case"TextBox":n=new ze.z({value:o}),o&&this.parent.cardSettings.headerField===e.key&&(n.enabled=!1);break;case"TextArea":(0,a.Od)(r),t=(0,a.az)("div"),r=(0,a.az)("textarea",{className:fe,attrs:{name:e.key,rows:"3"},innerHTML:o}),s.appendChild(t).appendChild(r)}return n&&n.appendTo(r),s},e.prototype.onBeforeDialogOpen=function(e){var t=this,i={data:this.parent.activeCardData.data,cancel:!1,element:this.element,target:this.parent.activeCardData.element,requestType:this.action};this.storeElement=document.activeElement,parseInt(e.maxHeight,10)<=250&&(e.maxHeight="250px"),this.parent.trigger("dialogOpen",i,(function(i){e.cancel=i.cancel,i.cancel&&t.destroy()}))},e.prototype.onBeforeDialogClose=function(e){var t=this,i=this.getFormElements(),n={};if(e.isInteracted&&(this.preventUpdate=!0),!this.preventUpdate)for(var s=0,r=i;s<r.length;s++){var o=r[s],l=o.name||this.getColumnName(o);if(!(0,a.le)(l)&&""!==l){var d=this.getValueFromElement(o);l===this.parent.cardSettings.headerField&&(d="string"===this.getIDType()?d:parseInt(d,10)),n[l]=d}}this.preventUpdate=!1;var c={data:n=(0,a.l7)(this.parent.activeCardData.data,n),cancel:!1,element:this.element,requestType:this.action};this.parent.trigger("dialogClose",c,(function(i){e.cancel=i.cancel,i.cancel||(t.cardData=c.data,t.destroy(),t.parent.actionModule.SingleCardSelection(t.cardData))}))},e.prototype.getIDType=function(){return 0!==this.parent.kanbanData.length?typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]:"string"},e.prototype.applyFormValidation=function(){for(var e=this,t=this.element.querySelector("."+ue),i={},n=0,a=this.parent.dialogSettings.fields;n<a.length;n++){var s=a[n];i[s.key]=s.validationRules&&Object.keys(s.validationRules).length>0?s.validationRules:null}this.formObj=new Be.Tl(t,{rules:i,customPlacement:function(t,i){var n=i.getAttribute("for");e.element.querySelector("#"+n+"_Error")||e.createTooltip(t,i,n,"")},validationComplete:function(t){var i=e.element.querySelector("#"+t.inputName+"_Error");i&&(i.style.display="failure"===t.status?"":"none")}})},e.prototype.createTooltip=function(e,t,i,n){var s,r,o=e.parentElement.getBoundingClientRect();this.element.classList.contains(pe)?(s=this.element,r=this.element.getBoundingClientRect()):r=(s=this.element.querySelector(".e-kanban-dialog .e-dlg-content")).getBoundingClientRect();var l=(0,a.az)("div",{className:"e-tooltip-wrap e-popup e-kanban-error",id:i+"_Error",styles:"display:"+n+";top:"+(o.bottom-r.top+s.scrollTop+9)+"px;left:"+(o.left-r.left+s.scrollLeft+o.width/2)+"px;"}),d=(0,a.az)("div",{className:"e-tip-content"});d.appendChild(t);var c=(0,a.az)("div",{className:"e-arrow-tip e-tip-top"});c.appendChild((0,a.az)("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild((0,a.az)("div",{className:"e-arrow-tip-inner e-tip-top"})),l.appendChild(d),l.appendChild(c),s.appendChild(l),l.style.left=parseInt(l.style.left,10)-l.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){this.element&&this.element.querySelectorAll(".e-kanban-error").forEach((function(e){return(0,a.Od)(e)})),this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.dialogButtonClick=function(e){var t=e.target.cloneNode(!0),i=this.formObj.element.id;if(document.getElementById(i)&&this.formObj.validate()&&(t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add"))){if(this.dialogObj.hide(),t.classList.contains("e-dialog-edit")){var n=this.parent.activeCardData,a=void 0;n.data[this.parent.keyField]===this.cardData[this.parent.keyField]&&n.element&&(a=[].slice.call(n.element.parentElement.children).indexOf(n.element)),this.parent.crudModule.updateCard(this.cardData,a)}t.classList.contains("e-dialog-add")&&this.parent.crudModule.addCard(this.cardData),this.parent.actionModule.SingleCardSelection(this.cardData),this.cardData=null}t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add")||(t.classList.contains("e-dialog-cancel")&&(this.preventUpdate=!0),this.dialogObj.hide(),t.classList.contains("e-dialog-yes")?this.parent.crudModule.deleteCard(this.parent.activeCardData.data):t.classList.contains("e-dialog-no")?this.openDialog("Edit",this.parent.activeCardData.data):t.classList.contains("e-dialog-delete")&&this.openDialog("Delete",this.parent.activeCardData.data))},e.prototype.getFormElements=function(){for(var e=[],t=0,i=[].slice.call(this.element.querySelectorAll(".e-field"));t<i.length;t++){var n=i[t];n.classList.contains("e-control")?e.push(n):n.querySelector(".e-control")?e.push(n.querySelector(".e-control")):e.push(n)}return e},e.prototype.getColumnName=function(e){var t=e.getAttribute("data-name")||"";if(""===t){var i=!1,n="";e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?(n=e.classList.contains("e-dropdownlist")?"e-ddl":"e-multiselect",i=!0):e.classList.contains("e-numerictextbox")&&(n="e-numeric");var s=i?"."+n+":not(.e-control)":"."+n,r=(0,a.oq)(e,s)||e.querySelector("."+n);if(r){var o=r.querySelector("[name]");o&&(t=o.name)}}return t},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:e.value},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements();e<t.length;e++){var i=t[e].ej2_instances;i&&i.length>0&&i.forEach((function(e){return e.destroy()}))}},e.prototype.destroy=function(){this.destroyToolTip(),this.destroyComponents(),this.dialogObj&&(this.dialogObj.destroy(),this.storeElement.focus(),this.dialogObj=null,(0,a.Od)(this.element),this.element=null)},e}(),_e=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new a.nv(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var t=this,i=this.parent.element.querySelectorAll(".e-card.e-selection").item(0);if(i||(0,a.oq)(document.activeElement,".e-kanban")){var n,s=[];switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,i);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,i);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.actionModule.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,i);break;case"escape":if(document.activeElement.classList.contains(ne)||document.activeElement.classList.contains(Le))if(document.activeElement.classList.contains(xe))(0,a.IV)([document.activeElement],xe),document.activeElement.focus();else{var r=(0,a.oq)(document.activeElement,".e-content-cells"),o=[].slice.call(r.querySelectorAll(".e-card"));(0,a.IV)(o,xe),r.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}break;case"tab":case"shiftTab":n=(0,a.oq)(document.activeElement,".e-content-cells"),document.activeElement.classList.contains(ne)&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&n.querySelector("."+Le)&&"tab"===e.action&&(0,a.cn)([n.querySelector("."+Le)],Fe)),document.activeElement.classList.contains(Le)&&(!n.querySelector(".e-card")&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains(M)&&(this.cardTabIndexRemove(),this.parent.keyboardModule.addRemoveTabIndex("Add"));break;case"delete":[].slice.call(this.parent.element.querySelectorAll(".e-card.e-selection")).forEach((function(e){s.push(t.parent.getCardDetails(e))})),this.parent.crudModule.deleteCard(s)}}},e.prototype.processCardSelection=function(e,t){if(t){(0,a.IV)([t],xe),this.parent.layoutModule.disableAttributeSelection(t);var i=this.parent.actionModule.selectionArray;i.splice(i.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var n=[].slice.call(this.parent.element.querySelectorAll(".e-card")),s="firstCardSelection"===e?n[0]:n[n.length-1];this.parent.actionModule.cardSelection(s,!1,!1),this.addRemoveTabIndex("Remove"),s.focus(),[].slice.call((0,a.oq)(s,".e-content-cells").querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")}))},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains(W)&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,t){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains(ne)&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(Le)){document.activeElement.setAttribute("tabindex","-1"),(0,a.IV)([document.activeElement],Fe);var i=(0,a.oq)(document.activeElement,".e-content-cells");i.querySelectorAll(".e-card").length>0&&[].slice.call(i.querySelectorAll(".e-card")).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains(ne)){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if((0,a.oq)(document.activeElement,".e-card-wrapper").nextElementSibling){var n=(0,a.oq)(document.activeElement,".e-card-wrapper").nextElementSibling;n.setAttribute("tabindex","0"),(0,a.cn)([n],Fe),n.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&t&&"Multiple"===this.parent.cardSettings.selectionType){var s=void 0;(s="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.actionModule.cardSelection(s,!1,!0),s.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&((0,a.IV)(e,xe),this.parent.layoutModule.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.parent.element.querySelectorAll("."+Le)).forEach((function(e){e.setAttribute("tabindex","-1"),(0,a.IV)([e],Fe)}))},e.prototype.processEnter=function(e,t){"space"===e.action&&e.preventDefault();var i=e.target;if(i.classList.contains(K)&&this.parent.actionModule.columnExpandCollapse(e),(i.classList.contains($)||i.classList.contains(ee))&&this.parent.actionModule.rowExpandCollapse(e),document.activeElement.classList.contains(ne)&&this.parent.actionModule.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(Le)&&(this.parent.dialogModule.dialogObj||this.parent.actionModule.addButtonClick(document.activeElement),document.activeElement.focus()),i.classList.contains(W)){var n=[].slice.call(i.querySelectorAll(".e-card"));this.addRemoveTabIndex("Remove"),n.length>0&&(i.querySelector(".e-card").focus(),n.forEach((function(e){e.setAttribute("tabindex","0")}))),i.querySelector("."+Le)&&(i.querySelector("."+Le).setAttribute("tabindex","0"),i.querySelector("."+Le).focus())}t===document.activeElement&&1===this.parent.element.querySelectorAll(".e-selection").length&&(this.parent.activeCardData={data:this.parent.getCardDetails(t),element:t},this.parent.dialogModule.dialogObj||this.parent.dialogModule.openDialog("Edit",this.parent.getCardDetails(t)),t.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",i=[].slice.call(this.parent.element.querySelectorAll(".e-header-icon"));i.length>0&&i.forEach((function(e){e.setAttribute("tabindex",t)}));var n=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row-expand"));n.length>0&&n.forEach((function(e){e.setAttribute("tabindex",t)}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){e.setAttribute("tabindex",t)}))},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),Ze=i(425),Ke=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new Ze.u({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:".e-tooltip-text",beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){if(this.parent.dragAndDropModule.isDragging)e.cancel=!0;else{var t;if(this.parent.tooltipTemplate){t=(0,a.az)("div");var i=(0,a.oq)(e.target,".e-card"),n=this.parent.getCardDetails(i),s=this.parent.element.id+"_tooltipTemplate",r=this.parent.templateParser(this.parent.tooltipTemplate)(n,this.parent,"tooltipTemplate",s,!1);(0,a.R3)(r,t),this.parent.renderTemplates()}else t='<div class="e-card-header-caption">'+e.target.innerText+"</div>";this.tooltipObj.setProperties({content:t},!0)}},e.prototype.onBeforeClose=function(){this.parent.resetTemplates(["tooltipTemplate"])},e.prototype.destroy=function(){this.tooltipObj.destroy(),(0,a.cn)([this.parent.element],"e-control"),this.tooltipObj=null},e}(),We=i(2166),Ue=i(8215),Ge=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+U),this.touchObj=new a.Xh(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var t=(0,a.oq)(e.originalEvent.target,".e-card");t&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(t,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=(0,a.az)("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-close"></button></div><div class="e-popup-content"></div>'});document.body.appendChild(e),(0,a.cn)([e],P),this.mobilePopup=new We.GI(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector(".e-close"),i=new Ue.z({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:"e-icons e-close-icon"});i.appendTo(t),i.isStringTemplate=!0,a.bi.add(t,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector(".e-popup-content").textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),(0,a.Od)(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),Xe=i(5454),Qe=i(8881),Je=i(1131),$e=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),et=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},tt="e-treeview",it="e-control",nt="e-icon-collapsible",at="e-icon-expandable",st="e-list-item",rt="e-list-text",ot="e-list-parent",lt="e-hover",dt="e-active",ct="e-icons-spinner",ht="e-process",pt="e-icons",ut="e-text-content",ft="e-input",gt="e-input-group",mt="e-tree-input",yt="e-editing",vt="e-rtl",bt="e-interaction",Ct="e-droppable",St="e-dragging",kt="e-sibling",wt="e-drop-in",xt="e-drop-next",Nt="e-drop-out",At="e-no-drop",Dt="e-fullrow",Ot="e-selected",Et="e-expanded",Tt="e-node-collapsed",Lt="e-disable",Ft="e-check",jt="e-stop",qt="e-checkbox-wrapper",Rt="e-frame",Mt="e-ripple",It="e-node-focus",Pt="e-list-img",Ht="e-animation-active",zt="e-disabled",Bt={treeRole:"tree",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $e(t,e),et([(0,a.Z9)("child")],t.prototype,"child",void 0),et([(0,a.Z9)([])],t.prototype,"dataSource",void 0),et([(0,a.Z9)("expanded")],t.prototype,"expanded",void 0),et([(0,a.Z9)("hasChildren")],t.prototype,"hasChildren",void 0),et([(0,a.Z9)("htmlAttributes")],t.prototype,"htmlAttributes",void 0),et([(0,a.Z9)("iconCss")],t.prototype,"iconCss",void 0),et([(0,a.Z9)("id")],t.prototype,"id",void 0),et([(0,a.Z9)("imageUrl")],t.prototype,"imageUrl",void 0),et([(0,a.Z9)("isChecked")],t.prototype,"isChecked",void 0),et([(0,a.Z9)("parentID")],t.prototype,"parentID",void 0),et([(0,a.Z9)(null)],t.prototype,"query",void 0),et([(0,a.Z9)("selected")],t.prototype,"selected",void 0),et([(0,a.Z9)(null)],t.prototype,"tableName",void 0),et([(0,a.Z9)("text")],t.prototype,"text",void 0),et([(0,a.Z9)("tooltip")],t.prototype,"tooltip",void 0),et([(0,a.Z9)("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(a.rt),Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $e(t,e),et([(0,a.Z9)("SlideDown")],t.prototype,"effect",void 0),et([(0,a.Z9)(400)],t.prototype,"duration",void 0),et([(0,a.Z9)("linear")],t.prototype,"easing",void 0),t}(a.rt),_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $e(t,e),et([(0,a.Zz)({effect:"SlideUp",duration:400,easing:"linear"},Vt)],t.prototype,"collapse",void 0),et([(0,a.Zz)({effect:"SlideDown",duration:400,easing:"linear"},Vt)],t.prototype,"expand",void 0),t}(a.rt),Zt=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isRefreshed=!1,n.preventExpand=!1,n.checkedElement=[],n.disableNode=[],n.validArr=[],n.validNodes=[],n.expandChildren=[],n.isFieldChange=!1,n.changeDataSource=!1,n.hasTemplate=!1,n.isFirstRender=!1,n.mouseDownStatus=!1,n}var i;return $e(t,e),i=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var e=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:at,ariaAttributes:Bt,expandIconPosition:"Left",itemCreated:function(t){e.beforeNodeCreate(t)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new a.fw({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),(0,a.le)(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),(0,a.le)(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),(0,a.le)(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add(zt):this.element.classList.remove(zt)},t.prototype.setEnableRtl=function(){(this.enableRtl?a.cn:a.IV)([this.element],vt)},t.prototype.setRipple=function(){var e={selector:".e-fullrow,.e-text-content",ignore:".e-text-content > .e-icons,.e-input-group,.e-input, ."+qt};this.rippleFn=(0,a.qx)(this.element,e);var t={selector:"."+ut+" > ."+pt,isCenterRipple:!0};this.rippleIconFn=(0,a.qx)(this.element,t)},t.prototype.setFullRow=function(e){(e?a.cn:a.IV)([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(e){var t=(0,a.Ys)("."+ot,this.element);e?t.setAttribute("aria-multiselectable","true"):t.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(e){if(e){this.hasTemplate=!0;this.element.classList.add(bt);try{if(document.querySelectorAll(e).length)return(0,a.MY)(document.querySelector(e).innerHTML.trim())}catch(t){return(0,a.MY)(e)}}this.element.classList.remove(bt)},t.prototype.setDataBinding=function(e){var t=this;this.treeList.push("false"),this.fields.dataSource instanceof r.h?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then((function(e){t.isOffline=t.fields.dataSource.dataSource.offline,t.fields.dataSource instanceof r.h&&t.isOffline&&(t.treeList.pop(),t.treeData=e.result,t.isNumberTypeId=t.getType(),t.setRootData(),t.renderItems(!0),0!==t.treeList.length||t.isLoaded||t.finalize())})).catch((function(e){t.trigger("actionFailure",{error:e})})):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then((function(i){t.treeList.pop(),t.treeData=i.result,t.isNumberTypeId=t.getType(),t.setRootData(),e&&(t.changeDataSource=!0),t.renderItems(!0),t.changeDataSource=!1,0!==t.treeList.length||t.isLoaded||t.finalize()})).catch((function(e){t.trigger("actionFailure",{error:e})}))):(this.treeList.pop(),(0,a.le)(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.getQuery=function(e,t){void 0===t&&(t=null);var i,n=[];if(e.query)i=e.query.clone();else{i=new o.A;for(var s=this.getActualProperties(e),r=0,l=Object.keys(s);r<l.length;r++){var d=l[r];"dataSource"!==d&&"tableName"!==d&&"child"!==d&&e[d]&&"url"!==d&&-1===n.indexOf(e[d])&&n.push(e[d])}i.select(n),s.hasOwnProperty("tableName")&&i.from(e.tableName)}return Xe.Kh.addSorting(this.sortOrder,e.text,i),(0,a.le)(t)||(0,a.le)(e.parentID)||i.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(t):t),i},t.prototype.getType=function(){return!!this.treeData[0]&&"number"===typeof(0,a.NA)(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);(0,a.le)(e)?this.rootData=[]:this.rootData=e}else this.rootData=this.treeData},t.prototype.renderItems=function(e){this.listBaseOption.ariaAttributes.level=1;var t=this.getSortedData(this.rootData);this.ulElement=Xe.Kh.createList(this.createElement,e?this.rootData:t,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[n],!0,null,!0),n++;(1===(0,a.td)("."+ot,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(e){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var t=this.fields,i=new r.h(this.treeData).executeLocal((new o.A).where(t.isChecked,"equal",!0,!1)),n=0;n<i.length;n++){var s=i[n][this.fields.id]?i[n][this.fields.id].toString():null;i[n][this.fields.parentID]&&i[n][this.fields.parentID].toString();if(-1!==this.checkedNodes.indexOf(s)||this.isLoaded||this.checkedNodes.push(s),i[n][this.fields.hasChildren])for(var l=i[n][this.fields.id],d=new r.h(this.treeData).executeLocal((new o.A).where(t.parentID,"equal",l,!1)),c=0;c<d.length;c++){var h=d[c][this.fields.id]?d[c][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(h)&&this.autoCheck&&this.checkedNodes.push(h)}}for(n=0;n<this.checkedNodes.length;n++){var p=this.fields,u=new r.h(this.treeData).executeLocal((new o.A).where(p.id,"equal",this.checkedNodes[n],!0));if(u[0]&&this.autoCheck&&(this.getCheckedNodeDetails(p,u),this.checkIndeterminateState(u[0])),u.length>0){var f=u[0][this.fields.id]?u[0][this.fields.id].toString():null;this.checkedNodes.indexOf(f)>-1&&-1===this.validNodes.indexOf(f)&&this.validNodes.push(f)}for(var g=new r.h(this.treeData).executeLocal((new o.A).where(p.parentID,"equal",this.checkedNodes[n],!0)),m=0;m<g.length;m++){f=g[m][this.fields.id]?g[m][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(f)&&this.autoCheck&&this.checkedNodes.push(f),this.checkedNodes.indexOf(f)>-1&&-1===this.validNodes.indexOf(f)&&this.validNodes.push(f)}}}else if(2===this.dataType||this.fields.dataSource instanceof r.h&&this.isOffline)for(m=0;m<this.treeData.length;m++){var y=this.treeData[m][this.fields.id]?this.treeData[m][this.fields.id].toString():"";this.treeData[m][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(y)&&this.checkedNodes.push(y),this.checkedNodes.indexOf(y)>-1&&-1===this.validNodes.indexOf(y)&&this.validNodes.push(y);var v=(0,a.NA)(this.fields.child.toString(),this.treeData[m]);v&&this.updateChildCheckState(v,this.treeData[m])}this.setProperties({checkedNodes:this.validNodes},!0)}},t.prototype.getCheckedNodeDetails=function(e,t){var i=t[0][this.fields.parentID]?t[0][this.fields.parentID].toString():null,n=0,s=this.element.querySelector('[data-uid="'+t[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+t[0][this.fields.parentID]+'"]');if(s||l){if(l){(0,a.Ys)("."+Ft,l)||this.changeState(l,"indeterminate",null,!0,!0)}}else{this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var d=this.getChildNodes(this.treeData,i),c=0;c<d.length;c++){var h=d[c][this.fields.id]?d[c][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(h)&&n++,n===d.length&&-1===this.checkedNodes.indexOf(i)&&this.checkedNodes.push(i)}var p=new r.h(this.treeData).executeLocal((new o.A).where(e.id,"equal",i,!0));this.getCheckedNodeDetails(e,p)}},t.prototype.updateParentCheckState=function(){for(var e,t=(0,a.td)(".e-stop",this.element),i=0;i<t.length;i++){var n=(0,a.oq)(t[i],"."+st),s=n.getAttribute("data-uid").toString(),l=0;if(e=1===this.dataType?new r.h(this.treeData).executeLocal((new o.A).where(this.fields.parentID,"equal",s,!0)):this.getChildNodes(this.treeData,s)){for(var d=0;d<e.length;d++){var c=e[d][this.fields.id].toString();-1!==this.checkedNodes.indexOf(c)&&l++}if(l===e.length){var h=n.getAttribute("data-uid");-1===this.checkedNodes.indexOf(h)&&this.checkedNodes.push(h),this.changeState(n,"check",null,!0,!0)}else 0===l&&0===this.checkedNodes.length&&this.changeState(n,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(e){var t;if(t=1===this.dataType?this.element.querySelector('[data-uid="'+e[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+e[this.fields.id]+'"]'))"true"!==t.querySelector("."+qt).getAttribute("aria-checked")&&this.changeState(t,"indeterminate",null,!0,!0);else if(2===this.dataType){this.parentNodeCheck.length;-1===this.parentNodeCheck.indexOf(e[this.fields.id].toString())&&this.parentNodeCheck.push(e[this.fields.id].toString())}},t.prototype.updateChildCheckState=function(e,t){for(var i=0,n=t[this.fields.id]?t[this.fields.id].toString():"",s=0;s<e.length;s++){var r=e[s][this.fields.id]?e[s][this.fields.id].toString():"";e[s][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(r)&&this.checkedNodes.push(r),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)&&this.autoCheck&&this.checkedNodes.push(r),-1!==this.checkedNodes.indexOf(r)&&this.autoCheck&&i++,this.checkedNodes.indexOf(r)>-1&&-1===this.validNodes.indexOf(r)&&this.validNodes.push(r);var o=(0,a.NA)(this.fields.child.toString(),e[s]);o&&(this.parentCheckData.push(t),this.updateChildCheckState(o,e[s])),i===e.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(t);for(var l=0;l<this.parentCheckData.length;l++)t!==this.parentCheckData[l]&&this.parentCheckData[l]&&this.checkIndeterminateState(this.parentCheckData[l])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(e){if(this.showCheckBox){var t=(0,Qe.eE)(this.createElement,!0,{cssClass:this.touchClass});t.setAttribute("role","checkbox");var i=(0,a.Ys)("div."+pt,e.item),n=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(t,e.item.childNodes[0].childNodes[(0,a.le)(i)?0:1]);var s=(0,a.NA)(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(n)>-1?((0,a.Ys)(".e-frame",t).classList.add(Ft),t.setAttribute("aria-checked","true"),this.addCheck(e.item)):(0,a.le)(s)||"true"!==s.toString()?t.setAttribute("aria-checked","false"):((0,a.Ys)(".e-frame",t).classList.add(Ft),t.setAttribute("aria-checked","true"),this.addCheck(e.item));var r=(0,a.Ys)(".e-frame",t);a.bi.add(r,"mousedown",this.frameMouseHandler,this),a.bi.add(r,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains(Ot)&&e.item.setAttribute("aria-selected","false");var o=e.fields;if(this.addActionClass(e,o.selected,Ot),this.addActionClass(e,o.expanded,Et),!(0,a.le)(this.nodeTemplateFn)){var l=e.item.querySelector("."+rt),d=e.item.getAttribute("data-uid");l.innerHTML="",this.renderNodeTemplate(e.curData,l,d)}var c={node:e.item,nodeData:e.curData,text:e.text};this.isRefreshed||this.trigger("drawNode",c)},t.prototype.frameMouseHandler=function(e){var t=(0,a.Ys)(".e-ripple-container",e.target.parentElement);(0,Qe.sg)(e,t)},t.prototype.addActionClass=function(e,t,i){var n=e.curData,s=(0,a.NA)(t,n);(0,a.le)(s)||"false"===s.toString()||e.item.classList.add(i)},t.prototype.getDataType=function(e,t){if(this.fields.dataSource instanceof r.h){for(var i=0;i<e.length;i++)if(this.isOffline){if("string"===typeof t.child&&(0,a.le)((0,a.NA)(t.child,e[i]))&&!(0,a.le)((0,a.NA)(t.parentID,e[i])))return 1}else if("string"===typeof t.child&&(0,a.le)((0,a.NA)(t.child,e[i])))return 1;return 2}i=0;for(var n=e.length;i<n;i++){if("string"===typeof t.child&&!(0,a.le)((0,a.NA)(t.child,e[i])))return 2;if(!(0,a.le)((0,a.NA)(t.parentID,e[i]))||!(0,a.le)((0,a.NA)(t.hasChildren,e[i])))return 1}return 1},t.prototype.getGroupedData=function(e,t){for(var i=(new o.A).group(t),n=Xe.Kh.getDataSource(e,i),a=[],s=0;s<n.length;s++){var r=n[s].items;a.push(r)}return a},t.prototype.getSortedData=function(e){return e&&"None"!==this.sortOrder&&(e=Xe.Kh.getDataSource(e,Xe.Kh.addSorting(this.sortOrder,this.fields.text))),e},t.prototype.finalizeNode=function(e){for(var t=(0,a.td)("."+Pt,e),i=0;i<t.length;i++)t[i].setAttribute("alt",Pt);if(this.isLoaded){for(var n=(0,a.td)("."+Ot,e),s=0;s<n.length;s++){this.selectNode(n[s],null);break}(0,a.IV)(n,Ot)}for(var r=(0,a.td)(".e-list-item:not(.e-expanded)",e),o=0;o<r.length;o++){var l=(0,a.Ys)("div."+pt,r[o]);l&&l.classList.contains(at)&&this.disableExpandAttr(r[o])}var d=(0,a.td)("."+Et,e);if(!this.isInitalExpand)for(s=0;s<d.length;s++)this.renderChildNodes(d[s]);(0,a.IV)(d,Et),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var e=(0,a.td)("li",this.element),t=0;t<e.length;t++)e[t].classList.contains(st)&&((0,a.Ys)("."+ot,e[t])?this.ensureParentCheckState(e[t]):this.ensureChildCheckState(e[t]));else{var i=(0,a.td)(".e-stop",this.element);for(t=0;t<i.length;t++)i[t].classList.remove(jt)}},t.prototype.ensureParentCheckState=function(e){if(!(0,a.le)(e)){if(e.classList.contains(tt))return;var t=e;e.classList.contains(st)&&(t=(0,a.Ys)("."+ot,e));var i=(0,a.td)("."+Ft,t),n=(0,a.td)(".e-stop",t),s=(0,a.td)("."+st,t),r=e.getElementsByClassName(qt)[0];s.length===i.length?this.changeState(r,"check",null,!0,!0):i.length>0||n.length>0?this.changeState(r,"indeterminate",null,!0,!0):0===i.length&&this.changeState(r,"uncheck",null,!0,!0);var o=(0,a.oq)(e,"."+ot);if(!(0,a.le)(o)){var l=(0,a.oq)(o,"."+st);this.ensureParentCheckState(l)}}},t.prototype.ensureChildCheckState=function(e,t){if(!(0,a.le)(e)){var i=(0,a.Ys)("."+ot,e),n=void 0;if(!(0,a.le)(i)){n=(0,a.td)("."+qt,i);for(var s=e.getElementsByClassName(Rt)[0].classList.contains(Ft),r=e.getElementsByClassName(Rt)[0].classList.contains(jt),o=i.querySelectorAll("li"),l=(i.parentElement.getAttribute("aria-expanded"),void 0),d=0;d<n.length;d++){var c=o[d].getAttribute("data-uid");if((0,a.le)(this.currentLoadData)||(0,a.le)((0,a.NA)(this.fields.isChecked,this.currentLoadData[d]))){var h=n[d].getElementsByClassName(Rt)[0].classList.contains(Ft);s||h&&!this.isLoaded||-1!==this.checkedNodes.indexOf(c)&&this.isLoaded&&(r||s)?l="check":o[d].classList.contains("e-has-child")&&!(0,a.o8)(this.parentNodeCheck)&&this.autoCheck&&(s||r)&&-1!==this.parentNodeCheck.indexOf(c)||1===this.dataType&&!(0,a.o8)(this.parentNodeCheck)&&this.autoCheck&&(s||r)&&-1!==this.parentNodeCheck.indexOf(c)?(l="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1)):l="uncheck"}else l=(0,a.NA)(this.fields.isChecked,this.currentLoadData[d])?"check":"uncheck",-1!==this.ele&&(l=s?"check":"uncheck"),"uncheck"===l&&!(0,a.o8)(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(c)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1),l="indeterminate");this.changeState(n[d],l,t,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(e,t){(0,a.td)("."+st,this.element);if((0,a.le)(e)){var i=(0,a.td)("."+qt,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++)this.updateFieldChecked(i[n],t),this.changeState(i[n],t?"check":"uncheck",null,null,null,t);else for(n=0;n<i.length;n++)this.updateFieldChecked(i[n],t),this.changeState(i[n],t?"check":"uncheck")}else for(var s=e.length;s>=0;s--){var r=void 0;if(r=1===e.length?this.getElement(e[s-1]):this.getElement(e[s]),(0,a.le)(r)){var o=void 0;if(""!==(o=e[s-e.length]?e[s-e.length].toString():e[s]?e[s].toString():null)&&t&&o)this.setValidCheckedNode(o),this.dynamicCheckState(o,t);else if(-1!==this.checkedNodes.indexOf(o)&&""!==o&&!t){this.checkedNodes.splice(this.checkedNodes.indexOf(o),1);var l=this.getChildNodes(this.treeData,o);if(l){for(var d=0;d<l.length;d++){var c=l[d][this.fields.id]?l[d][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(c)){this.checkedNodes.splice(this.checkedNodes.indexOf(c),1);var h=this.element.querySelector('[data-uid="'+c+'"]');h&&this.changeState(h,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)}o&&this.dynamicCheckState(o,t),this.updateField(this.treeData,this.fields,o,"isChecked",null)}}else{var p=(0,a.Ys)(".e-list-parent ."+qt,r);this.validateCheckNode(p,!t,r,null)}}if(e)for(var u=0;u<e.length;u++){o=e[u]?e[u].toString():"";t||this.updateField(this.treeData,this.fields,o,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(e,t){var i=(0,a.oq)(e,"."+st),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||t||this.updateField(this.treeData,this.fields,n,"isChecked",null)},t.prototype.dynamicCheckState=function(e,t){if(1===this.dataType){var i=0,n=new r.h(this.treeData).executeLocal((new o.A).where(this.fields.id,"equal",e,!0));if(n[0]){var s=n[0][this.fields.id]?n[0][this.fields.id].toString():null,l=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,d=((f=this.element.querySelector('[data-uid="'+l+'"]'))&&(0,a.Ys)(".e-stop",f),f?(0,a.Ys)("."+Ft,f):null),c=this.element.querySelector('[data-uid="'+s+'"]'),h=this.getChildNodes(this.treeData,l);if(h)for(var p=0;p<h.length;p++){var u=h[p][this.fields.id]?h[p][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&i++}-1!==this.checkedNodes.indexOf(e)&&f&&s===e&&this.autoCheck?this.changeState(f,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&c&&s===e&&!t?this.changeState(c,"uncheck",null):-1!==this.checkedNodes.indexOf(e)&&c&&s===e&&t?this.changeState(c,"check",null):-1===this.checkedNodes.indexOf(e)&&!c&&f&&s===e&&this.autoCheck&&0!==i?this.changeState(f,"indeterminate",null):-1===this.checkedNodes.indexOf(e)&&!c&&f&&s===e&&this.autoCheck&&0===i?this.changeState(f,"uncheck",null):c||f||s!==e||!this.autoCheck||this.updateIndeterminate(e,t)}}else if(2===this.dataType||this.fields.dataSource instanceof r.h&&this.isOffline){s=void 0;var f=void 0;for(d=void 0,p=0;p<this.treeData.length;p++){s=this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():"",d=(f=this.element.querySelector('[data-uid="'+s+'"]'))?(0,a.Ys)("."+Ft,f):null,-1===this.checkedNodes.indexOf(s)&&f&&d&&!t&&this.changeState(f,"uncheck",null);var g=(0,a.NA)(this.fields.child.toString(),this.treeData[p]);g&&this.updateChildIndeterminate(g,s,e,t,s)}}},t.prototype.updateIndeterminate=function(e,t){var i,n=this.getTreeData(e),a=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var s=this.getChildNodes(this.treeData,i);if(s)for(var r=0;r<s.length;r++){var o=s[r][this.fields.id]?s[r][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(o)&&a++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&t||!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==a?this.changeState(l,"indeterminate",null):!t&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===a?this.changeState(l,"uncheck",null):l||(t||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?t&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):t||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===a||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,t),-1===this.checkedNodes.indexOf(i)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},t.prototype.updateChildIndeterminate=function(e,t,i,n,s){for(var r=0,o=0;o<e.length;o++){var l=e[o][this.fields.id]?e[o][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(l)&&r++;var d=this.element.querySelector('[data-uid="'+t+'"]'),c=d?(0,a.Ys)(".e-stop",d):null,h=d?(0,a.Ys)("."+Ft,d):null,p=this.element.querySelector('[data-uid="'+l+'"]'),u=p?(0,a.Ys)("."+Ft,p):null;if(-1!==this.checkedNodes.indexOf(i)&&d&&l===i&&this.autoCheck)this.changeState(d,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!d||p||l!==i||n){if(-1===this.checkedNodes.indexOf(i)&&p&&l===i&&!n)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&c&&l===i&&this.autoCheck&&0===r&&!n)c.classList.remove(jt);else if(-1===this.checkedNodes.indexOf(i)&&!p&&h&&l===i&&0===r)this.changeState(d,"uncheck",null);else if(-1===this.checkedNodes.indexOf(l)&&p&&u&&0===r)this.changeState(p,"uncheck",null);else if(!p&&!d&&l===i||-1!==this.parentNodeCheck.indexOf(t)&&this.autoCheck){var f=this.element.querySelector('[data-uid="'+s+'"]');n&&0!==r?this.changeState(f,"indeterminate",null):n&&r===e.length&&-1===this.checkedNodes.indexOf(t)?this.checkedNodes.push(t):n||0!==r||-1===this.parentNodeCheck.indexOf(t)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)),-1===this.parentNodeCheck.indexOf(t)&&this.parentNodeCheck.push(t)}}else this.autoCheck?this.changeState(d,"uncheck",null):0!==r?this.changeState(d,"indeterminate",null):this.changeState(d,"uncheck",null);var g=(0,a.NA)(this.fields.child.toString(),e[o]);g&&this.updateChildIndeterminate(g,l,i,n,s)}},t.prototype.changeState=function(e,t,i,n,s,r){var o,l=this,d=(0,a.oq)(e,"."+st);e===d&&(e=(0,a.Ys)("."+qt,d)),n?this.nodeCheckAction(e,t,d,o,i,n,s,r):(this.checkActionNodes=[],o=this.getCheckEvent(d,t,i),this.trigger("nodeChecking",o,(function(a){a.cancel||l.nodeCheckAction(e,t,d,a,i,n,s,r)})))},t.prototype.nodeCheckAction=function(e,t,i,n,s,r,o,l){var d,c=e.getElementsByClassName(Rt)[0];if("check"!==t||c.classList.contains(Ft)?"uncheck"===t&&(c.classList.contains(Ft)||c.classList.contains(jt))?((0,a.IV)([c],[Ft,jt]),this.removeCheck(i),d="false"):"indeterminate"===t&&this.autoCheck&&(c.classList.remove(Ft),c.classList.add(jt),this.removeCheck(i),d="mixed"):(c.classList.remove(jt),c.classList.add(Ft),this.addCheck(i),d="true"),d="check"===t?"true":"uncheck"===t?"false":d,(0,a.le)(d)||e.setAttribute("aria-checked",d),o){var h=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,t,s),(0,a.o8)(r)&&(n.data=h)}void 0!==l&&this.ensureStateChange(i,l),r||(0,a.le)(d)||(e.setAttribute("aria-checked",d),n.data[0].checked=d,this.trigger("nodeChecked",n),this.checkActionNodes=[])},t.prototype.addCheck=function(e){var t=e.getAttribute("data-uid");(0,a.le)(t)||-1!==this.checkedNodes.indexOf(t)||this.checkedNodes.push(t)},t.prototype.removeCheck=function(e){var t=this.checkedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.checkedNodes.splice(t,1)},t.prototype.getCheckEvent=function(e,t,i){this.checkActionNodes.push(this.getNodeData(e));var n=this.checkActionNodes;return{action:t,cancel:!1,isInteracted:!(0,a.le)(i),node:e,data:n}},t.prototype.finalize=function(){var e=(0,a.Ys)("."+ot,this.element);if(!(0,a.le)(e)){e.setAttribute("role",Bt.treeRole),this.setMultiSelect(this.allowMultiSelection);var t=(0,a.Ys)("."+st,this.element);t&&((0,a.cn)([t],It),this.updateIdAttr(null,t)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},t.prototype.setTextWrap=function(){(this.allowTextWrap?a.cn:a.IV)([this.element],"e-text-wrap"),a.AR.isIE&&(this.allowTextWrap?a.cn:a.IV)([this.element],"e-ie-wrap")},t.prototype.updateWrap=function(e){if(this.fullRowSelect)for(var t=e?(0,a.td)("."+st,e):this.liList,i=t.length,n=0;n<i;n++)this.calculateWrap(t[n])},t.prototype.calculateWrap=function(e){var t=(0,a.Ys)("."+Dt,e);t&&t.nextElementSibling&&(t.style.height=this.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")},t.prototype.doExpandAction=function(){var e=this.expandedNodes;if(this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof r.h)this.expandGivenNodes(e);else{for(var t=0;t<e.length;t++){var i=(0,a.Ys)('[data-uid="'+e[t]+'"]',this.element);if((0,a.le)(i))e[t]&&-1===this.expandChildren.indexOf(e[t])&&this.expandChildren.push(e[t].toString());else{var n=(0,a.Ys)("."+at,(0,a.Ys)("."+ut,i));(0,a.le)(n)||this.expandAction(i,n,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(e){var t=this;this.expandCallback(e[this.index],(function(){t.index++,t.index<e.length?t.expandGivenNodes(e):t.afterFinalized()}))},t.prototype.expandCallback=function(e,t){var i=(0,a.Ys)('[data-uid="'+e+'"]',this.element);if((0,a.le)(i))t();else{var n=(0,a.Ys)("."+at,(0,a.Ys)("."+ut,i));(0,a.le)(n)?t():this.expandAction(i,n,null,!1,t)}},t.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,!this.isLoaded||this.isFieldChange){var e={data:this.treeData};this.trigger("dataBound",e)}this.isLoaded=!0},t.prototype.doSelectionAction=function(){var e=(0,a.td)("."+Ot,this.element),t=this.selectedNodes;if(t.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<t.length;i++){var n=(0,a.Ys)('[data-uid="'+t[i]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(t[i]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);(0,a.IV)(e,Ot)},t.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length&&(e[t].classList.contains("e-disable")||this.selectNode(e[t],null,!0),this.allowMultiSelection);t++);},t.prototype.clickHandler=function(e){var t=e.originalEvent.target;if(a.bi.remove(this.element,"contextmenu",this.preventContextMenu),t&&!this.dragStartAction){var i=t.classList,n=(0,a.oq)(t,"."+st);if(n){if(3!==e.originalEvent.which){var s=(0,a.Ys)(".e-ripple-element",n),r=(0,a.Ys)("."+pt,n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var o=(0,a.oq)(t,"."+qt);if(!(0,a.le)(o)){var l=(0,a.Ys)(".e-frame",o);return this.validateCheckNode(o,l.classList.contains(Ft),n,e.originalEvent),void this.triggerClickEvent(e.originalEvent,n)}}i.contains(at)?this.expandAction(n,t,e):i.contains(nt)?this.collapseNode(n,t,e):s&&r?r.classList.contains(Mt)&&r.classList.contains(at)?this.expandAction(n,r,e):r.classList.contains(Mt)&&r.classList.contains(nt)?this.collapseNode(n,r,e):i.contains(ot)||i.contains(st)||this.toggleSelect(n,e.originalEvent,!1):i.contains(ot)||i.contains(st)||this.toggleSelect(n,e.originalEvent,!1)}this.triggerClickEvent(e.originalEvent,n)}}},t.prototype.nodeCheckedEvent=function(e,t,i){(0,a.oq)(e,"."+st);var n=this.getCheckEvent(e,t?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)},t.prototype.triggerClickEvent=function(e,t){var i={event:e,node:t};this.trigger("nodeClicked",i)},t.prototype.expandNode=function(e,t,i){var n=this;if(this.renderReactTemplates(),t.classList.contains(ct)&&this.hideSpinner(t),this.initialRender||t.classList.add("interaction"),!0!==i||!0===i&&e.classList.contains("e-expanded")){if(!0!==this.preventExpand){(0,a.IV)([t],at),(0,a.cn)([t],nt);var s=0,o=0,l=this,d=(0,a.Ys)("."+ot,e),c=e;this.setHeight(c,d);var h=(0,a.Ys)(".e-list-item."+dt,e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(d,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(t){c.style.overflow="hidden",!(0,a.le)(h)&&h instanceof HTMLElement&&h.classList.add(Ht),s=c.offsetHeight,o=(0,a.Ys)("."+ut,e).offsetHeight},progress:function(e){e.element.style.display="block",l.animateHeight(e,s,o)},end:function(e){e.element.style.display="block",!(0,a.le)(h)&&h instanceof HTMLElement&&h.classList.remove(Ht),n.expandedNode(c,d,t)}}):this.expandedNode(c,d,t)}}else(0,a.Ys)("."+ot,e).style.display="none",this.fields.dataSource instanceof r.h===!0&&(this.preventExpand=!1);this.initialRender&&t.classList.add("interaction")},t.prototype.expandedNode=function(e,t,i){t.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",(0,a.IV)([i],ht),this.addExpand(e),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(e),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(e){e.setAttribute("aria-expanded","true"),(0,a.IV)([e],Tt);var t=e.getAttribute("data-uid");(0,a.le)(t)||-1!==this.expandedNodes.indexOf(t)||this.expandedNodes.push(t)},t.prototype.collapseNode=function(e,t,i){var n,s=this;t.classList.contains(ht)||((0,a.cn)([t],ht),this.isLoaded?(n=this.getExpandEvent(e,i),this.trigger("nodeCollapsing",n,(function(i){i.cancel?(0,a.IV)([t],ht):s.nodeCollapseAction(e,t,i)}))):this.nodeCollapseAction(e,t,n))},t.prototype.nodeCollapseAction=function(e,t,i){var n=this;(0,a.IV)([t],nt),(0,a.cn)([t],at);var s=0,r=0,o=this,l=(0,a.Ys)("."+ot,e),d=e,c=(0,a.Ys)(".e-list-item."+dt,e);this.isAnimate?this.aniObj.animate(l,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(t){d.style.overflow="hidden",!(0,a.le)(c)&&c instanceof HTMLElement&&c.classList.add(Ht),s=(0,a.Ys)("."+ut,e).offsetHeight,r=d.offsetHeight},progress:function(e){o.animateHeight(e,s,r)},end:function(e){e.element.style.display="none",!(0,a.le)(c)&&c instanceof HTMLElement&&c.classList.remove(Ht),n.collapsedNode(d,l,t,i)}}):this.collapsedNode(d,l,t,i)},t.prototype.collapsedNode=function(e,t,i,n){t.style.display="none",e.style.overflow="",e.style.height="",(0,a.IV)([i],ht),this.removeExpand(e),this.isLoaded&&(n=this.getExpandEvent(e,null),this.trigger("nodeCollapsed",n))},t.prototype.removeExpand=function(e,t){t?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var i=this.expandedNodes.indexOf(e.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},t.prototype.disableExpandAttr=function(e){e.setAttribute("aria-expanded","false"),(0,a.cn)([e],Tt)},t.prototype.setHeight=function(e,t){t.style.display="block",t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},t.prototype.animateHeight=function(e,t,i){var n=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=n+"px"},t.prototype.renderChildNodes=function(e,t,i,n){var s,o=this,l=(0,a.Ys)("div."+pt,e);if(!(0,a.le)(l))if(this.showSpinner(l),this.fields.dataSource instanceof r.h){var d=this.parents(e,"."+ot).length,c=this.getChildFields(this.fields,d,1);if((0,a.le)(c)||(0,a.le)(c.dataSource))return(0,a.og)(l),void this.removeExpand(e,!0);this.treeList.push("false"),this.fields.dataSource instanceof r.h&&this.isOffline?(this.treeList.pop(),s=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(s,c,l,e,t,i,n)):c.dataSource.executeQuery(this.getQuery(c,e.getAttribute("data-uid"))).then((function(a){o.treeList.pop(),s=a.result,1===o.dataType&&(o.dataType=2),o.loadChild(s,c,l,e,t,i,n)})).catch((function(e){o.trigger("actionFailure",{error:e})}))}else{if(s=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(s),(0,a.le)(s)||0===s.length)return(0,a.og)(l),void this.removeExpand(e,!0);this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(Xe.Kh.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(e,l,n),this.setSelectionForChildNodes(s),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(s),this.renderSubChild(e,t,n)}},t.prototype.loadChild=function(e,t,i,n,s,o,l){if(this.currentLoadData=e,(0,a.le)(e)||0===e.length)(0,a.og)(i),this.removeExpand(n,!0);else{if(this.updateListProp(t),this.fields.dataSource instanceof r.h&&!this.isOffline){var d=n.getAttribute("data-uid"),c=this.getNodeObject(d);(0,a.sO)("child",e,c)}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(Xe.Kh.createList(this.createElement,e,this.listBaseOption)),this.expandNode(n,i,l),this.setSelectionForChildNodes(e),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(e),this.renderSubChild(n,s,l)}o&&o(),0!==this.treeList.length||this.isLoaded||this.finalize()},t.prototype.disableTreeNodes=function(e){for(var t=0;t<e.length;){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),t++}},t.prototype.setSelectionForChildNodes=function(e){var t;for(t=0;t<e.length;t++){var i=e[t][this.fields.id]?e[t][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null},t.prototype.getFields=function(e,t,i){return t===i?e:this.getFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildFields=function(e,t,i){return t===i?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),t,i+1)},t.prototype.getChildMapper=function(e){return"string"===typeof e.child||(0,a.le)(e.child)?e:e.child},t.prototype.getChildNodes=function(e,t,i){var n;if(void 0===i&&(i=!1),(0,a.le)(e))return n;if(1===this.dataType)return this.getChildGroup(this.groupedData,t,i);if("string"===typeof this.fields.child)for(var s=0,r=e.length;s<r;s++){var o=(0,a.NA)(this.fields.id,e[s]);if(o&&o.toString()===t)return(0,a.NA)(this.fields.child,e[s]);if(!(0,a.le)((0,a.NA)(this.fields.child,e[s]))&&void 0!==(n=this.getChildNodes((0,a.NA)(this.fields.child,e[s]),t)))break}return n},t.prototype.getChildGroup=function(e,t,i){var n;if((0,a.le)(e))return n;for(var s=0,r=e.length;s<r;s++){if((0,a.le)(e[s][0])||(0,a.le)((0,a.NA)(this.fields.parentID,e[s][0])))return i?e[s]:[];if((0,a.NA)(this.fields.parentID,e[s][0]).toString()===t)return e[s]}return n},t.prototype.renderSubChild=function(e,t,i){if(t)for(var n=(0,a.td)("."+at,e),s=0,r=n.length;s<r;s++){var o=n[s];if(e.querySelector(".e-icons")!==n[s]){var l=(0,a.oq)(o,"."+st);this.expandArgs=this.getExpandEvent(l,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(l,t,null,i)}}},t.prototype.toggleSelect=function(e,t,i){e.classList.contains("e-disable")||(this.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t):this.selectNode(e,t,i))},t.prototype.isActive=function(e){return!!e.classList.contains(dt)},t.prototype.selectNode=function(e,t,i){var n,s=this;(0,a.le)(e)||!this.allowMultiSelection&&this.isActive(e)&&!(0,a.le)(t)?this.setFocusElement(e):this.isLoaded?(n=this.getSelectEvent(e,"select",t),this.trigger("nodeSelecting",n,(function(n){n.cancel||s.nodeSelectAction(e,t,n,i)}))):this.nodeSelectAction(e,t,n,i)},t.prototype.nodeSelectAction=function(e,t,i,n){if(this.allowMultiSelection&&(n||t&&(!t||t.ctrlKey))||this.removeSelectAll(),this.allowMultiSelection&&t&&t.shiftKey){this.startNode||(this.startNode=e);var s=this.liList.indexOf(this.startNode),r=this.liList.indexOf(e);if(s>r){var o=s;s=r,r=o}for(var l=s;l<=r;l++){var d=this.liList[l];(0,a.pn)(d)&&!d.classList.contains("e-disable")&&this.addSelect(d)}}else this.startNode=e,this.addSelect(e);this.setFocusElement(e),this.isLoaded&&(i.nodeData=this.getNodeData(e),this.trigger("nodeSelected",i))},t.prototype.unselectNode=function(e,t){var i,n=this;this.isLoaded?(i=this.getSelectEvent(e,"un-select",t),this.trigger("nodeSelecting",i,(function(t){t.cancel||n.nodeUnselectAction(e,t)}))):this.nodeUnselectAction(e,i)},t.prototype.nodeUnselectAction=function(e,t){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(t.nodeData=this.getNodeData(e),this.trigger("nodeSelected",t))},t.prototype.setFocusElement=function(e){if(!(0,a.le)(e)){var t=this.getFocusedNode();t&&(0,a.IV)([t],It),(0,a.cn)([e],It),this.updateIdAttr(t,e)}},t.prototype.addSelect=function(e){e.setAttribute("aria-selected","true"),(0,a.cn)([e],dt);var t=e.getAttribute("data-uid");(0,a.le)(t)||-1!==this.selectedNodes.indexOf(t)||this.selectedNodes.push(t)},t.prototype.removeSelect=function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),(0,a.IV)([e],dt);var t=this.selectedNodes.indexOf(e.getAttribute("data-uid"));t>-1&&this.selectedNodes.splice(t,1)},t.prototype.removeSelectAll=function(){for(var e=this.element.querySelectorAll("."+dt),t=0,i=e;t<i.length;t++){var n=i[t];this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}(0,a.IV)(e,dt),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(e,t,i){var n=this.getNodeData(e);return{action:t,cancel:!1,isInteracted:!(0,a.le)(i),node:e,nodeData:n}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?a.AR.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(e){var t=e.originalEvent.target;!t||t.classList.contains(ft)||t.classList.contains(tt)||t.classList.contains(ot)||t.classList.contains(st)||t.classList.contains(pt)||this.showCheckBox&&(0,a.oq)(t,"."+qt)||this.expandCollapseAction((0,a.oq)(t,"."+st),e)},t.prototype.expandCollapseAction=function(e,t){var i=(0,a.Ys)("div."+pt,e);if(i&&!i.classList.contains(ht)){var n=i.classList;n.contains(at)?this.expandAction(e,i,t):n.contains(nt)&&this.collapseNode(e,i,t)}},t.prototype.expandAction=function(e,t,i,n,s){var r=this;t.classList.contains(ht)||((0,a.cn)([t],ht),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,i),this.trigger("nodeExpanding",this.expandArgs,(function(i){i.cancel?(0,a.IV)([t],ht):r.nodeExpandAction(e,t,n,s)}))):this.nodeExpandAction(e,t,n,s))},t.prototype.nodeExpandAction=function(e,t,i,n){var s=(0,a.Ys)("."+ot,e);if(s&&"UL"===s.nodeName)this.expandNode(e,t);else{this.isFirstRender=!0,this.renderChildNodes(e,i,n);for(var r=(0,a.td)("."+st,e),o=0;o<r.length;o++){var l=this.getId(r[o]);if(-1!==this.expandChildren.indexOf(l)&&void 0!==this.expandChildren){var d=(0,a.Ys)("."+at,(0,a.Ys)("."+ut,r[o]));(0,a.le)(d)||this.expandAction(r[o],d,null),this.expandChildren.splice(this.expandChildren.indexOf(l),1)}}}},t.prototype.keyActionHandler=function(e){var t=this,i=e.target,n=this.getFocusedNode();if(i&&i.classList.contains(ft)){var s=i;"enter"===e.action?(s.blur(),this.element.focus(),(0,a.cn)([n],lt)):"escape"===e.action&&(s.value=this.oldText,s.blur(),this.element.focus(),(0,a.cn)([n],lt))}else{e.preventDefault();var r={cancel:!1,event:e,node:n};this.trigger("keyPress",r,(function(i){if(!i.cancel)switch(e.action){case"space":t.showCheckBox&&t.checkNode(e);break;case"moveRight":t.openNode(!t.enableRtl,e);break;case"moveLeft":t.openNode(!!t.enableRtl,e);break;case"shiftDown":t.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":t.navigateNode(!0);break;case"shiftUp":t.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":t.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":t.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":t.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.toggleSelect(n,e);break;case"f2":t.allowEditing&&!n.classList.contains("e-disable")&&t.createTextbox(n,e);break;case"ctrlA":if(t.allowMultiSelection){var s=(0,a.td)(".e-list-item:not(.e-active)",t.element);t.selectGivenNodes(s)}}}))}},t.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+ut),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!(0,a.le)(n)){var s=n.getBoundingClientRect();i.bottom>s.bottom?n.scrollTop+=i.bottom-s.bottom:i.top<s.top&&(n.scrollTop-=s.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},t.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(e){return(0,a.le)(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},t.prototype.shiftKeySelect=function(e,t){if(this.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},t.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=(0,a.Ys)("."+qt,t),n=(0,a.Ys)(" .e-frame",i).classList.contains(Ft);t.classList.contains("e-disable")||0==t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,t,e)},t.prototype.validateCheckNode=function(e,t,i,n){var s=this,r=(0,a.oq)(e,"."+st);this.checkActionNodes=[];var o=t?"false":"true";(0,a.le)(o)||e.setAttribute("aria-checked",o);var l=this.getCheckEvent(r,t?"uncheck":"check",n);this.trigger("nodeChecking",l,(function(a){a.cancel||s.nodeCheckingAction(e,t,i,a,n)}))},t.prototype.nodeCheckingAction=function(e,t,i,n,s){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){var r=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==r?this.allCheckNode(r,this.checkedElement,null,null,!1):r=null}if(this.changeState(e,t?"uncheck":"check",s,!0),this.autoCheck){this.ensureChildCheckState(i),this.ensureParentCheckState((0,a.oq)((0,a.oq)(i,"."+ot),"."+st));var o=void 0;"check"===n.action?o=!0:"uncheck"===n.action&&(o=!1),this.ensureStateChange(i,o)}this.nodeCheckedEvent(e,t,s)},t.prototype.ensureStateChange=function(e,t){var i=(0,a.Ys)("."+ot,e),n=e.getAttribute("data-uid"),s=this.fields;if(1===this.dataType&&this.autoCheck)for(var l=new r.h(this.treeData).executeLocal((new o.A).where(s.parentID,"equal",n,!0)),d=0;d<l.length;d++){var c=l[d][this.fields.id]?l[d][this.fields.id].toString():null,h=l[d][this.fields.isChecked]?l[d][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(c)){this.checkedNodes.push(c);var p=this.getChildNodes(this.treeData,c);this.getChildItems(p,t),-1!==this.parentNodeCheck.indexOf(c)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1)}else if(-1===this.checkedNodes.indexOf(n)&&null===i&&-1!==this.checkedNodes.indexOf(c)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(c),1),"true"===h&&this.updateField(this.treeData,this.fields,c,"isChecked",null),-1===this.checkedNodes.indexOf(n)&&null===i||-1!==this.parentNodeCheck.indexOf(c)){var u=this.getChildNodes(this.treeData,c);this.getChildItems(u,t),-1!==this.parentNodeCheck.indexOf(c)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(c),1)}}else{p=this.getChildNodes(this.treeData,c);this.getChildItems(p,t)}}else if(1!==this.dataType||this.autoCheck){(p=this.getChildNodes(this.treeData,n))&&this.childStateChange(p,n,i,t)}else if(t)for(d=0;d<this.treeData.length;d++){var f=this.treeData[d][this.fields.id]?this.treeData[d][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(f)&&this.checkedNodes.push(f)}else{for(var g=new r.h(this.treeData).executeLocal((new o.A).where(s.isChecked,"equal",!0,!1)),d=0;d<g.length;d++){var m=g[d][this.fields.id]?g[d][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&this.checkedNodes.splice(this.checkedNodes.indexOf(m),1),this.updateField(this.treeData,this.fields,m,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null,a=e[i][this.fields.isChecked]?e[i][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||t||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&t&&this.checkedNodes.push(n),"true"!==a||t||this.updateField(this.treeData,this.fields,n,"isChecked",null);var s=this.getChildNodes(this.treeData,n);s.length>0&&this.getChildItems(s,t)}},t.prototype.childStateChange=function(e,t,i,n){for(var a=0;a<e.length;a++){var s=e[a][this.fields.id]?e[a][this.fields.id].toString():"",r=e[a][this.fields.isChecked]?e[a][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(t)&&-1===this.checkedNodes.indexOf(s)?(this.checkedNodes.push(s),-1!==this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s),1)):-1!==this.checkedNodes.indexOf(t)||-1===this.checkedNodes.indexOf(s)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),"true"===r&&this.updateField(this.treeData,this.fields,s,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s):(-1!==this.checkedNodes.indexOf(s)&&this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),this.updateField(this.treeData,this.fields,s,"isChecked",null),this.checkedNodes=[]));var o=this.getChildNodes([e[a]],s);o&&this.childStateChange(o,t,i,n)}},t.prototype.allCheckNode=function(e,t,i,n,s){if(e)for(var r=0;r<e.length;r++){var o=(0,a.NA)(this.fields.id,e[r]),l=this.element.querySelector('[data-uid="'+o+'"]');!1!==s&&-1===this.checkedElement.indexOf(o.toString())&&(null===l&&!(0,a.le)(e[r][this.fields.isChecked])&&-1===t.indexOf(o.toString())||0===n||2===i)&&(!1!==e[r][this.fields.isChecked]||2===i?t.push(o.toString()):n=null,n=!1!==e[r][this.fields.isChecked]||2===i?0:null),-1===t.indexOf(o.toString())&&(0,a.le)(i)&&t.push(o.toString());var d=(0,a.NA)(this.fields.child.toString(),e[r]);if(!0===(0,a.NA)(this.fields.hasChildren,e[r])||d){var c=(0,a.NA)(this.fields.id,e[r]),h=void 0;(h=1===this.dataType?this.getChildNodes(this.treeData,c.toString()):d)&&((0,a.le)(s)?this.allCheckNode(h,t,i,n):this.allCheckNode(h,t,i,n,s),n=null)}n=null}},t.prototype.openNode=function(e,t){var i=this.getFocusedNode(),n=(0,a.Ys)("div."+pt,i);if(e){if(!n)return;n.classList.contains(at)?this.expandAction(i,n,t):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(nt))this.collapseNode(i,n,t);else{var s=(0,a.oq)((0,a.oq)(i,"."+ot),"."+st);if(!s)return;s.classList.contains("e-disable")||(this.setFocus(i,s),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(e){var t=this.getFocusedNode();this.focusNextNode(t,e)},t.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(t,i),this.navigateToFocus(e))},t.prototype.getFocusedNode=function(){var e,t=(0,a.Ys)(".e-list-item."+It,this.element);return(0,a.le)(t)&&(e=(0,a.Ys)("."+st,this.element)),(0,a.le)(t)?(0,a.le)(e)?this.element.firstElementChild:e:t},t.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,i),this.navigateToFocus(!t),i.classList.contains("e-disable")){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(ut)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}},t.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],(0,a.le)(t))return e}while(!(0,a.pn)(t));return t},t.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],(0,a.le)(t))return e}while(!(0,a.pn)(t));return t},t.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!(0,a.pn)(e));return e},t.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!(0,a.pn)(e));return e},t.prototype.setFocus=function(e,t){(0,a.IV)([e],[lt,It]),t.classList.contains("e-disable")||((0,a.cn)([t],[lt,It]),this.updateIdAttr(e,t))},t.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){this.mouseDownStatus||(0,a.cn)([this.getFocusedNode()],lt),this.mouseDownStatus=!1},t.prototype.focusOut=function(){(0,a.IV)([this.getFocusedNode()],lt)},t.prototype.onMouseOver=function(e){var t=e.target,i=t.classList,n=(0,a.oq)(t,"."+st);!n||i.contains(ot)||i.contains(st)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)},t.prototype.setHover=function(e){e.classList.contains(lt)||(this.removeHover(),(0,a.cn)([e],lt))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){var e=(0,a.td)("."+lt,this.element);e&&e.length&&(0,a.IV)(e,lt)},t.prototype.getNodeData=function(e,t){if(!(0,a.le)(e)&&e.classList.contains(st)&&!(0,a.le)((0,a.oq)(e,"."+it))&&(0,a.oq)(e,"."+it).classList.contains(tt)){var i=e.getAttribute("data-uid"),n=this.getText(e,t),s=(0,a.oq)(e.parentNode,"."+st),r=s?s.getAttribute("data-uid"):null,o=e.classList.contains(dt),l="true"===e.getAttribute("aria-expanded"),d=null!==e.getAttribute("aria-expanded")||null!=((0,a.Ys)("."+at,e)||(0,a.Ys)("."+nt,e)),c=null;return this.showCheckBox&&(c=(0,a.Ys)("."+qt,e).getAttribute("aria-checked")),{id:i,text:n,parentID:r,selected:o,expanded:l,isChecked:c,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(e,t){if(t){var i=this.getNodeObject(e.getAttribute("data-uid")),n=parseFloat(e.getAttribute("aria-level")),s=this.getFields(this.fields,n,1);return(0,a.NA)(s.text,i)}return(0,a.Ys)("."+rt,e).textContent},t.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{cancel:!1,isInteracted:!(0,a.le)(t),node:e,nodeData:i,event:t}},t.prototype.renderNodeTemplate=function(e,t,i){var n=this.nodeTemplateFn(e,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,t);n&&(n=Array.prototype.slice.call(n),(0,a.R3)(n,t))},t.prototype.destroyTemplate=function(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),a.AR.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",(0,a.le)(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(e,t){(0,a.le)(e)||""===e||(0,a.IV)([this.element],e.split(" ")),(0,a.le)(t)||""===t||(0,a.cn)([this.element],t.split(" "))},t.prototype.editingHandler=function(e){var t=e.target;if(!(!t||t.classList.contains(tt)||t.classList.contains(ot)||t.classList.contains(st)||t.classList.contains(pt)||t.classList.contains(ft)||t.classList.contains(gt))){var i=(0,a.oq)(t,"."+st);this.createTextbox(i,e)}},t.prototype.createTextbox=function(e,t){var i=this,n=(0,a.Ys)("."+mt,this.element);n&&n.blur();var s=(0,a.Ys)("."+rt,e);this.updateOldText(e);var r=this.createElement("input",{className:mt,attrs:{value:this.oldText}}),o=this.getEditEvent(e,null,r.outerHTML);this.trigger("nodeEditing",o,(function(t){if(!t.cancel){var n="width:"+(s.offsetWidth+5)+"px";(0,a.cn)([e],yt),(0,a.le)(i.nodeTemplateFn)||i.destroyTemplate(e),s.innerHTML=o.innerHtml;var r=(0,a.Ys)("."+mt,s);i.inputObj=Je.I.createInput({element:r,properties:{enableRtl:i.enableRtl}},i.createElement),i.inputObj.container.setAttribute("style",n),r.focus();var l=r;l.setSelectionRange(0,l.value.length),i.wireInputEvents(r)}}))},t.prototype.updateOldText=function(e){var t=e.getAttribute("data-uid");this.editData=this.getNodeObject(t);var i=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=(0,a.NA)(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(e){if((0,a.Ys)("."+mt,this.element)){var t=e.target,i=t.value,n=(0,a.oq)(t,"."+rt),s=(0,a.oq)(t,"."+st);(0,a.og)(this.inputObj.container),this.fields.dataSource instanceof r.h&&!this.isOffline?this.crudOperation("update",null,s,i,null,null,!0):this.appendNewText(s,n,i,!0)}},t.prototype.appendNewText=function(e,t,i,n){var a=this,s=this.getEditEvent(e,i,null);this.trigger("nodeEdited",s,(function(s){i=s.cancel?s.oldText:s.newText,a.updateText(e,t,i,n),s.oldText!==i&&a.triggerEvent()}))},t.prototype.updateText=function(e,t,i,n){var s=(0,a.sO)(this.editFields.text,i,this.editData);if((0,a.le)(this.nodeTemplateFn))t.innerText=i;else{t.innerText="";var r=e.getAttribute("data-uid");this.renderNodeTemplate(s,t,r),this.renderReactTemplates()}n&&((0,a.IV)([e],yt),t.focus()),this.allowTextWrap&&this.calculateWrap(e)},t.prototype.getElement=function(e){return(0,a.le)(e)?null:"string"===typeof e?this.element.querySelector('[data-uid="'+e+'"]'):"object"===typeof e?(0,a.sb)(e):null},t.prototype.getId=function(e){return(0,a.le)(e)?null:"string"===typeof e?e:"object"===typeof e?(0,a.sb)(e).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(e,t,i){return{cancel:!1,newText:t,node:e,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},t.prototype.getNodeObject=function(e){var t;if((0,a.le)(e))return t;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,e);for(var i=0,n=this.treeData.length;i<n;i++){var s=(0,a.NA)(this.fields.id,this.treeData[i]);if(!(0,a.le)(this.treeData[i])&&!(0,a.le)(s)&&s.toString()===e)return this.treeData[i]}return t},t.prototype.getChildNodeObject=function(e,t,i){var n;if((0,a.le)(e))return n;for(var s=0,o=e.length;s<o;s++){var l=(0,a.NA)(t.id,e[s]);if(e[s]&&l&&l.toString()===i)return e[s];if("string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[s]))){if(this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[s]))){if(void 0!==(n=this.getChildNodeObject((0,a.NA)("child",e[s]),this.getChildMapper(t),i)))break}}else{var d=(0,a.NA)(t.child,e[s]);if(void 0!==(n=this.getChildNodeObject(d,this.getChildMapper(t),i)))break}}return n},t.prototype.setDragAndDrop=function(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var e,t=this,i=this;this.dragObj=new a._l(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+ut,helper:function(n){t.dragTarget=n.sender.target;var s=(0,a.oq)(t.dragTarget,"."+tt),r=(0,a.oq)(t.dragTarget,"."+ut);if(t.dragLi=(0,a.oq)(t.dragTarget,"."+st),t.fullRowSelect&&!r&&t.dragTarget.classList.contains(Dt)&&(r=t.dragTarget.nextElementSibling),!t.dragTarget||!n.element.isSameNode(s)||!r||t.dragTarget.classList.contains(tt)||t.dragTarget.classList.contains(ot)||t.dragTarget.classList.contains(st)||t.dragLi.classList.contains("e-disable"))return!1;var o=r.cloneNode(!0);if((0,a.le)((0,a.Ys)("div."+pt,o))){var l=i.createElement("div",{className:pt+" "+at});o.insertBefore(l,o.children[0])}var d="e-drag-item "+tt+" "+t.cssClass+" "+(t.enableRtl?vt:"");(e=i.createElement("div",{className:d})).appendChild(o);var c=t.selectedNodes.length;if(c>1&&t.allowMultiSelection&&t.dragLi.classList.contains(dt)){var h=i.createElement("span",{className:"e-drop-count",innerHTML:""+c});e.appendChild(h)}return document.body.appendChild(e),document.body.style.cursor="",t.dragData=t.getNodeData(t.dragLi),e},dragStart:function(i){(0,a.cn)([t.element],St);var n,s=(0,a.oq)(i.target,".e-list-item");s&&(n=parseInt(s.getAttribute("aria-level"),10));var r=t.getDragEvent(i.event,t,null,i.target,null,e,n);r.draggedNode.classList.contains(yt)?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.trigger("nodeDragStart",r,(function(n){n.cancel?(t.dragObj.intDestroy(i.event),t.dragCancelAction(e)):t.dragStartAction=!0}))},drag:function(i){t.dragObj.setProperties({cursorAt:{top:!(0,a.le)(i.event.targetTouches)||a.AR.isDevice?60:-20}}),t.dragAction(i,e)},dragStop:function(e){(0,a.IV)([t.element],St),t.removeVirtualEle();var i=e.target,n=(0,a.oq)(i,"."+Ct);i&&n||((0,a.og)(e.helper),document.body.style.cursor="");var s,r=(0,a.oq)(i,".e-list-item");r&&(s=parseInt(r.getAttribute("aria-level"),10));var o=t.getDragEvent(e.event,t,i,i,null,e.helper,s);o.preventTargetExpand=!1,t.trigger("nodeDragStop",o,(function(i){t.dragParent=i.draggedParentNode,t.preventExpand=i.preventTargetExpand,i.cancel&&(e.helper.parentNode&&(0,a.og)(e.helper),document.body.style.cursor="",!1),t.dragStartAction=!1}))}}),this.dropObj=new a.bK(this.element,{out:function(e){(0,a.le)(e)||e.target.classList.contains(kt)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""},drop:function(e){t.dropAction(e)}})},t.prototype.dragCancelAction=function(e){(0,a.og)(e),(0,a.IV)([this.element],St),this.dragStartAction=!1},t.prototype.dragAction=function(e,t){var i=(0,a.oq)(e.target,"."+Ct),n=(0,a.oq)(e.target,"."+ut),s=(0,a.Ys)("div."+pt,t);(0,a.IV)([s],[wt,xt,Nt,At]),this.removeVirtualEle(),document.body.style.cursor="";var r=e.target.classList;if(this.fullRowSelect&&!n&&!(0,a.le)(r)&&r.contains(Dt)&&(n=e.target.nextElementSibling),i){var o=(0,a.oq)(e.target,"."+st),l=(0,a.oq)(e.target,"."+qt),d=(0,a.oq)(e.target,"."+nt),c=(0,a.oq)(e.target,"."+at);if(!i.classList.contains(tt)||n&&!o.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,o))if(this.hasTemplate&&o){var h=(0,a.Ys)(this.fullRowSelect?"."+Dt:"."+ut,o);if(e&&!c&&!d&&e.event.offsetY<7&&!l||c&&e.event.offsetY<5||d&&e.event.offsetX<3){var p=this.fullRowSelect?1:0;this.appendIndicator(o,s,p)}else if(e&&!c&&!d&&!l&&h&&e.event.offsetY>h.offsetHeight-10||c&&e.event.offsetY>19||d&&e.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(o,s,p)}else(0,a.cn)([s],wt)}else if(o&&e&&!c&&!d&&e.event.offsetY<7&&!l||c&&e.event.offsetY<5||d&&e.event.offsetX<3){p=this.fullRowSelect?1:0;this.appendIndicator(o,s,p)}else if(o&&e&&!c&&!d&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!l||c&&e.event.offsetY>19||d&&e.event.offsetX>19){p=this.fullRowSelect?2:1;this.appendIndicator(o,s,p)}else(0,a.cn)([s],wt);else"LI"!==e.target.nodeName||o.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,o)?e.target.classList.contains(kt)?(0,a.cn)([s],xt):(0,a.cn)([s],Nt):((0,a.cn)([s],xt),this.renderVirtualEle(e))}else(0,a.cn)([s],At),document.body.style.cursor="not-allowed";var u,f=(0,a.oq)(e.target,".e-list-item");f&&(u=parseInt(f.getAttribute("aria-level"),10));var g=this.getDragEvent(e.event,this,e.target,e.target,null,t,u);g.dropIndicator&&(0,a.IV)([s],g.dropIndicator),this.trigger("nodeDragging",g),g.dropIndicator&&(0,a.cn)([s],g.dropIndicator)},t.prototype.appendIndicator=function(e,t,i){(0,a.cn)([t],xt);var n=this.createElement("div",{className:kt});e.insertBefore(n,e.children[i])},t.prototype.dropAction=function(e){var t,n,s,o=e.event.offsetY,l=e.target,d=!1;s=e.dragData.draggable;for(var c=0;c<s.ej2_instances.length;c++)if(s.ej2_instances[c]instanceof i){t=s.ej2_instances[c];break}if(t&&t.dragTarget){var h=t.dragTarget,p=(0,a.oq)(h,"."+st),u=(0,a.oq)(l,"."+st);if(null==u&&l.classList.contains(tt)&&(u=l.firstElementChild),(0,a.og)(e.droppedElement),document.body.style.cursor="",!u||u.isSameNode(p)||this.isDescendant(p,u))return void(this.fields.dataSource instanceof r.h===!1&&(this.preventExpand=!1));if(t.allowMultiSelection&&p.classList.contains(dt)){var f=(0,a.td)("."+dt,t.element);if(e.target.offsetHeight<=33&&o>e.target.offsetHeight-10&&o>6)for(c=f.length-1;c>=0;c--)u.isSameNode(f[c])||this.isDescendant(f[c],u)||this.appendNode(l,f[c],u,e,t,o);else for(c=0;c<f.length;c++)u.isSameNode(f[c])||this.isDescendant(f[c],u)||this.appendNode(l,f[c],u,e,t,o)}else this.appendNode(l,p,u,e,t,o);n=parseInt(p.getAttribute("aria-level"),10),d=!0}this.fields.dataSource instanceof r.h===!1&&(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(e.event,t,l,e.target,e.dragData.draggedElement,null,n,d)),t.element.id!==this.element.id&&t.triggerEvent(),this.triggerEvent()},t.prototype.appendNode=function(e,t,i,n,s,r){var o=(0,a.oq)(e,"."+qt),l=(0,a.oq)(n.target,"."+nt),d=(0,a.oq)(n.target,"."+at);t.classList.contains("e-disable")||o||!(d&&n.event.offsetY<5||l&&n.event.offsetX<3||d&&n.event.offsetY>19||l&&n.event.offsetX>19||!d&&!l)?this.dropAsChildNode(t,i,s,null,n,r,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,s):e.firstElementChild&&e.classList.contains(tt)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,s):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(t,i,n,s):this.dropAsChildNode(t,i,s,null,n,r)},t.prototype.dropAsSiblingNode=function(e,t,i,n){var s,r=(0,a.oq)(t,"."+ot),o=(0,a.oq)(e,"."+ot),l=(0,a.oq)(o,"."+st);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?s=!1:i.event.offsetY<2?s=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?s=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(s=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var d=i.target.closest("li");r.insertBefore(e,s?d:d.nextElementSibling)}else r.insertBefore(e,s?i.target:i.target.nextElementSibling);this.moveData(e,t,r,s,n),this.updateElement(o,l),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(e,t,i,n,s,r,o){var l,d=(0,a.oq)(e,"."+ot),c=(0,a.oq)(d,"."+st),h=(0,a.oq)(t,"."+ot);if(s&&s.target&&(l=(0,a.Ys)(this.fullRowSelect?"."+Dt:"."+ut,t)),s&&r<7&&!o)h.insertBefore(e,t),this.moveData(e,t,h,!0,i);else if(s&&s.target.offsetHeight>0&&r>s.target.offsetHeight-10&&!o&&!this.hasTemplate)h.insertBefore(e,t.nextElementSibling),this.moveData(e,t,h,!1,i);else if(this.hasTemplate&&l&&r>l.offsetHeight-10&&!o)h.insertBefore(e,t.nextElementSibling),this.moveData(e,t,h,!1,i);else{var p=this.expandParent(t),u=p.childNodes[n];p.insertBefore(e,u),this.moveData(e,u,p,!0,i)}this.updateElement(d,c),this.updateAriaLevel(e),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},t.prototype.moveData=function(e,t,i,n,s){var r=(0,a.oq)(i,"."+st),o=this.getId(e),l=s.updateChildField(s.treeData,s.fields,o,null,null,!0),d=this.getId(t),c=this.getDataPos(this.treeData,this.fields,d),h=this.getId(r);if(1===this.dataType){this.updateField(this.treeData,this.fields,h,"hasChildren",!0);var p=(0,a.le)(c)?this.treeData.length:n?c:c+1;if((0,a.le)(h)&&!this.hasPid)delete l[0][this.fields.parentID];else{var u=this.isNumberTypeId?parseFloat(h):h;(0,a.sO)(this.fields.parentID,u,l[0])}if(this.treeData.splice(p,0,l[0]),s.element.id!==this.element.id){var f=s.removeChildNodes(o);p++;for(var g=0,m=f.length;g<m;g++)this.treeData.splice(p,0,f[g]),p++;s.groupedData=s.getGroupedData(s.treeData,s.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,h,l,n?c:c+1)},t.prototype.expandParent=function(e){var t=(0,a.Ys)("div."+pt,e);t&&t.classList.contains(at)&&!0!==this.preventExpand&&this.expandAction(e,t,null);var i,n=(0,a.Ys)("."+ot,e);(!0===this.preventExpand&&!n&&t&&this.renderChildNodes(e),n=(0,a.Ys)("."+ot,e),(0,a.le)(n)||!0!==this.preventExpand||(n.style.display="none"),(0,a.le)(n)||!1!==this.preventExpand||(n.style.display="block"),(0,a.le)(n)&&!0===this.preventExpand)&&((0,a.le)(t)&&Xe.Kh.generateIcon(this.createElement,e,at,this.listBaseOption),(i=(0,a.Ys)("div."+pt,e))&&i.classList.add("e-icon-expandable"),n=Xe.Kh.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),i?(0,a.IV)([i],nt):Xe.Kh.generateIcon(this.createElement,e,at,this.listBaseOption),e.setAttribute("aria-expanded","false"),n.style.display="none");(0,a.le)(n)&&(this.trigger("nodeExpanding",this.getExpandEvent(e,null)),(0,a.le)(t)&&Xe.Kh.generateIcon(this.createElement,e,nt,this.listBaseOption),(i=(0,a.Ys)("div."+pt,e))||(Xe.Kh.generateIcon(this.createElement,e,nt,this.listBaseOption),i=(0,a.Ys)("div."+pt,e)),(0,a.IV)([i],at),n=Xe.Kh.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null)));return n},t.prototype.updateElement=function(e,t){if(t&&0===e.childElementCount){var i=(0,a.Ys)("div."+pt,t);(0,a.og)(e),(0,a.og)(i);var n=this.getId(t);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(t,!0)}},t.prototype.updateAriaLevel=function(e){var t=this.parents(e,"."+ot).length;e.setAttribute("aria-level",""+t),this.updateChildAriaLevel((0,a.Ys)("."+ot,e),t+1)},t.prototype.updateChildAriaLevel=function(e,t){if(!(0,a.le)(e))for(var i=e.childNodes,n=0,s=i.length;n<s;n++){var r=i[n];r.setAttribute("aria-level",""+t),this.updateChildAriaLevel((0,a.Ys)("."+ot,r),t+1)}},t.prototype.renderVirtualEle=function(e){var t;e.event.offsetY>e.target.offsetHeight-2?t=!1:e.event.offsetY<2&&(t=!0);var i=this.createElement("div",{className:kt}),n=this.fullRowSelect?t?1:2:t?0:1;e.target.insertBefore(i,e.target.children[n])},t.prototype.removeVirtualEle=function(){var e=(0,a.Ys)("."+kt);e&&(0,a.og)(e)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(e,t,i,n,s,o,l,d){var c=i?(0,a.oq)(i,"."+st):null,h=c?this.getNodeData(c):null,p=t?t.dragLi:s,u=t?t.dragData:null,f=i?this.parents(i,"."+st):null,g=t.dragLi.parentElement,m=t.dragLi?(0,a.oq)(g,"."+st):null,y=null,v=null,b=[xt,wt,Nt,At],C=null,S=!0===d?p:c,k=S?(0,a.oq)(S,".e-list-parent"):null,w=0,x=null;if(m=t.dragLi&&null===m?(0,a.oq)(g,"."+tt):m,m=!0===d?this.dragParent:m,o)for(;w<4;){if((0,a.Ys)("."+pt,o).classList.contains(b[w])){C=b[w];break}w++}if(k){var N=0;for(w=0;w<k.childElementCount;w++){if(N=!0!==d&&k.children[w]===p&&c!==p?++N:N,!0!==d&&k.children[w].classList.contains("e-hover")){v=e.offsetY>=23?w+1:w;break}if(k.children[w]===S){e.offsetY,v=w;break}}v=0!==N?--v:v,x="e-drop-in"==C?"Inside":e.offsetY<7?"Before":"After"}if(i&&(y=0===f.length?null:i.classList.contains(st)?f[0]:f[1]),c===p&&(y=c),i&&n.offsetHeight<=33&&e.offsetY<n.offsetHeight-10&&e.offsetY>6&&(y=c,!0!==d)){l=++l;var A=y?(0,a.Ys)(".e-list-parent",y):null;if(v=A?A.children.length:0,!(this.fields.dataSource instanceof r.h)&&null===A&&y){var D=y.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,y.getAttribute("data-uid").toString()):null;v=D?D.length:0}}return{cancel:!1,clonedNode:o,event:e,draggedNode:p,draggedNodeData:u,droppedNode:c,droppedNodeData:h,dropIndex:v,dropLevel:l,draggedParentNode:m,dropTarget:y,dropIndicator:C,target:n,position:x}},t.prototype.addFullRow=function(e){var t=this.liList.length;if(e)for(var i=0;i<t;i++)this.createFullRow(this.liList[i]);else for(i=0;i<t;i++){var n=(0,a.Ys)("."+Dt,this.liList[i]);(0,a.og)(n)}},t.prototype.createFullRow=function(e){var t=this.createElement("div",{className:Dt});e.insertBefore(t,e.childNodes[0])},t.prototype.addMultiSelect=function(e){if(e)for(var t=0,i=(0,a.td)('.e-list-item:not([aria-selected="true"])',this.element);t<i.length;t++){i[t].setAttribute("aria-selected","false")}else for(var n=0,s=(0,a.td)('.e-list-item[aria-selected="false"]',this.element);n<s.length;n++){s[n].removeAttribute("aria-selected")}},t.prototype.collapseByLevel=function(e,t,i){if(t>0&&!(0,a.le)(e))for(var n=this.getVisibleNodes(i,e.childNodes),s=0,r=n.length;s<r;s++){var o=n[s],l=(0,a.Ys)("."+nt,(0,a.Ys)("."+ut,o));(0,a.le)(l)||this.collapseNode(o,l,null),this.collapseByLevel((0,a.Ys)("."+ot,o),t-1,i)}},t.prototype.collapseAllNodes=function(e){for(var t=this.getVisibleNodes(e,(0,a.td)("."+nt,this.element)),i=0,n=t.length;i<n;i++){var s=t[i],r=(0,a.oq)(s,"."+st);this.collapseNode(r,s,null)}},t.prototype.expandByLevel=function(e,t,i){if(t>0&&!(0,a.le)(e))for(var n=this.getVisibleNodes(i,e.childNodes),s=0,r=n.length;s<r;s++){var o=n[s],l=(0,a.Ys)("."+at,(0,a.Ys)("."+ut,o));(0,a.le)(l)||this.expandAction(o,l,null),this.expandByLevel((0,a.Ys)("."+ot,o),t-1,i)}},t.prototype.expandAllNodes=function(e){for(var t=this.getVisibleNodes(e,(0,a.td)("."+at,this.element)),i=0,n=t.length;i<n;i++){var s=t[i],r=(0,a.oq)(s,"."+st);this.expandAction(r,s,null,!0)}},t.prototype.getVisibleNodes=function(e,t){var i=Array.prototype.slice.call(t);if(e)for(var n=0;n<i.length;n++)(0,a.pn)(i[n])||(i.splice(n,1),n--);return i},t.prototype.removeNode=function(e){var t=(0,a.oq)(e,"."+ot),i=(0,a.oq)(t,"."+st);(0,a.le)(this.nodeTemplateFn)||this.destroyTemplate(e),(0,a.og)(e),this.updateElement(t,i),this.removeData(e)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call((0,a.td)("."+st,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var e=(0,a.td)("."+dt,this.element);this.selectGivenNodes(e)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var e=(0,a.td)('[aria-expanded="true"]',this.element),t=0,i=e.length;t<i;t++)this.addExpand(e[t])},t.prototype.removeData=function(e){if(1===this.dataType){var t=new r.h(this.treeData),i=this.getId(e),n={},a=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=a,t.remove(this.fields.id,n),this.removeChildNodes(i)}else{i=this.getId(e);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},t.prototype.removeChildNodes=function(e){var t=this.getChildGroup(this.groupedData,e,!1),i=[];if(t)for(var n=0,s=t.length;n<s;n++){var o=new r.h(this.treeData),l=(0,a.NA)(this.fields.id,t[n]).toString(),d={},c=this.isNumberTypeId?parseFloat(l):l;d[this.fields.id]=c;var h=o.remove(this.fields.id,d);i.push(h[0]),this.removeChildNodes(l)}return i},t.prototype.doGivenAction=function(e,t,i){for(var n=0,s=e.length;n<s;n++){var r=this.getElement(e[n]);if(!(0,a.le)(r)){var o=(0,a.Ys)("."+t,(0,a.Ys)("."+ut,r));(0,a.le)(o)||(i?this.expandAction(r,o,null):this.collapseNode(r,o,null))}}},t.prototype.addGivenNodes=function(e,t,i,n,s){if(0!==e.length){var r=this.getSortedData(e),o=t?parseFloat(t.getAttribute("aria-level"))+1:1;n&&this.updateMapper(o);for(var l,d=Xe.Kh.createListItemFromJson(this.createElement,r,this.listBaseOption,o),c=(l=s||(t?this.expandParent(t):(0,a.Ys)("."+ot,this.element))).childNodes[i],h=0;h<d.length;h++)l.insertBefore(d[h],c);var p=this.getId(t);if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);for(var u=this.getId(c),f=(0,a.le)(u)?this.treeData.length:this.getDataPos(this.treeData,this.fields,u),g=0;g<e.length;g++){if(!(0,a.le)(p)){var m=this.isNumberTypeId?parseFloat(p):p;(0,a.sO)(this.fields.parentID,m,e[g])}this.treeData.splice(f,0,e[g]),f++}}else this.addChildData(this.treeData,this.fields,p,e,i);this.finalizeNode(l)}},t.prototype.updateMapper=function(e){var t=1===e?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(t)},t.prototype.updateListProp=function(e){var t=this.getActualProperties(e);this.listBaseOption.fields=t,this.listBaseOption.fields.url=t.hasOwnProperty("navigateUrl")?t.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(e,t,i){for(var n=null,s=0,o=e.length;s<o;s++){var l=(0,a.NA)(t.id,e[s]);if(e[s]&&l&&l.toString()===i)return s;if("string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[s]))){if(this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[s]))){var d=(0,a.NA)("child",e[s]);if(null!==(n=this.getDataPos(d,this.getChildMapper(t),i)))break}}else{var c=(0,a.NA)(t.child,e[s]);if(null!==(n=this.getDataPos(c,this.getChildMapper(t),i)))break}}return n},t.prototype.addChildData=function(e,t,i,n,s){var o;if((0,a.le)(i)){s=(0,a.le)(s)?e.length:s;for(var l=0,d=n.length;l<d;l++)e.splice(s,0,n[l]),s++;return o}for(var c=0,h=e.length;c<h;c++){var p=(0,a.NA)(t.id,e[c]);if(e[c]&&p&&p.toString()===i){if("string"===typeof t.child&&e[c].hasOwnProperty(t.child)&&null!==e[c][t.child]||this.fields.dataSource instanceof r.h&&e[c].hasOwnProperty("child")){var u="string"===typeof t.child?t.child:"child",f=(0,a.NA)(u,e[c]);(0,a.le)(f)&&(f=[]),s=(0,a.le)(s)?f.length:s;for(l=0,d=n.length;l<d;l++)f.splice(s,0,n[l]),s++}else{u="string"===typeof t.child?t.child:"child";e[c][u]=n}return!0}if("string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[c]))){if(this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[c]))){f=(0,a.NA)("child",e[c]);if(void 0!==(o=this.addChildData(f,this.getChildMapper(t),i,n,s)))break}}else{var g=(0,a.NA)(t.child,e[c]);if(void 0!==(o=this.addChildData(g,this.getChildMapper(t),i,n,s)))break}}return o},t.prototype.doDisableAction=function(e){var t=this.nodeType(e),i=this.checkValidId(t);this.validArr=[];for(var n=0,s=i.length;n<s;n++){var r=i[n][this.fields.id].toString();r&&-1===this.disableNode.indexOf(r)&&this.disableNode.push(r);var o=this.getElement(r);o&&(o.setAttribute("aria-disabled","true"),(0,a.cn)([o],Lt))}},t.prototype.doEnableAction=function(e){for(var t=this.nodeType(e),i=0,n=t.length;i<n;i++){var s=this.getElement(t[i]),r=t[i];r&&-1!==this.disableNode.indexOf(r)&&this.disableNode.splice(this.disableNode.indexOf(r),1),s&&(s.removeAttribute("aria-disabled"),(0,a.IV)([s],Lt))}},t.prototype.nodeType=function(e){for(var t=[],i=0,n=e.length;i<n;i++){var a=void 0;"string"==typeof e[i]?a=e[i]?e[i].toString():null:"object"===typeof e[i]&&(a=e[i]?e[i].getAttribute("data-uid").toString():null),-1==t.indexOf(a)&&t.push(a)}return t},t.prototype.checkValidId=function(e){var t=this;if(1===this.dataType)this.validArr=this.treeData.filter((function(i){return-1!==e.indexOf(i[t.fields.id]?i[t.fields.id].toString():null)}));else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var n=this.treeData[i][this.fields.id]?this.treeData[i][this.fields.id].toString():null;-1!==e.indexOf(n)&&this.validArr.push(this.treeData[i]);var s=(0,a.NA)(this.fields.child.toString(),this.treeData[i]);s&&this.filterNestedChild(s,e)}return this.validArr},t.prototype.filterNestedChild=function(e,t){for(var i=0;i<e.length;i++){var n=e[i][this.fields.id]?e[i][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(e[i]);var s=(0,a.NA)(this.fields.child.toString(),e[i]);s&&this.filterNestedChild(s,t)}},t.prototype.setTouchClass=function(){var e=(0,a.oq)(this.element,".e-bigger");this.touchClass=(0,a.le)(e)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,t=0,i=e.length;t<i;t++)this.updateField(this.treeData,this.fields,e[t],"selected",!0);for(var n=this.expandedNodes,a=0,s=n.length;a<s;a++)this.updateField(this.treeData,this.fields,n[a],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var r=this.checkedNodes,o=0;for(s=r.length;o<s;o++)this.updateField(this.treeData,this.fields,r[o],"isChecked",!0)}},t.prototype.removeField=function(e,t,i){if(!(0,a.le)(e)&&!(0,a.le)(t))for(var n=0,s=e.length;n<s;n++){for(var o=0;o<i.length;o++){var l=this.getMapperProp(t,i[o]);(0,a.le)(e[n][l])||delete e[n][l]}"string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[n]))?this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[n]))&&this.removeField((0,a.NA)("child",e[n]),this.getChildMapper(t),i):this.removeField((0,a.NA)(t.child,e[n]),this.getChildMapper(t),i)}},t.prototype.getMapperProp=function(e,t){switch(t){case"selected":return(0,a.le)(e.selected)?"selected":e.selected;case"expanded":return(0,a.le)(e.expanded)?"expanded":e.expanded;case"isChecked":return(0,a.le)(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return(0,a.le)(e.hasChildren)?"hasChildren":e.hasChildren;default:return t}},t.prototype.updateField=function(e,t,i,n,s){if(!(0,a.le)(i))if(1===this.dataType){var l=this.isNumberTypeId?parseFloat(i):i,d=new r.h(this.treeData).executeLocal((new o.A).where(t.id,"equal",l,!1));(0,a.sO)(this.getMapperProp(t,n),s,d[0])}else this.updateChildField(e,t,i,n,s)},t.prototype.updateChildField=function(e,t,i,n,s,o){var l;if((0,a.le)(e))return l;for(var d=0,c=e.length;d<c;d++){var h=(0,a.NA)(t.id,e[d]);if(e[d]&&h&&h.toString()===i)return o?l=e.splice(d,1):((0,a.sO)(this.getMapperProp(t,n),s,e[d]),l=[]),l;if("string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[d]))){if(this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[d]))){var p=(0,a.NA)("child",e[d]);if(void 0!==(l=this.updateChildField(p,this.getChildMapper(t),i,n,s,o)))break}}else{var u=(0,a.NA)(t.child,e[d]);if(void 0!==(l=this.updateChildField(u,this.getChildMapper(t),i,n,s,o)))break}}return l},t.prototype.triggerEvent=function(){this.renderReactTemplates();var e={data:this.treeData};this.trigger("dataSourceChanged",e)},t.prototype.wireInputEvents=function(e){a.bi.add(e,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.disabled){var i=this;this.touchEditObj=new a.Xh(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new a.Xh(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new a.Xh(this.element,{tap:function(e){("Click"===t.expandOnType||"DblClick"===t.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&a.bi.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(e){e.preventDefault()},t.prototype.wireEvents=function(){a.bi.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),a.bi.add(this.element,"focus",this.focusIn,this),a.bi.add(this.element,"blur",this.focusOut,this),a.bi.add(this.element,"mouseover",this.onMouseOver,this),a.bi.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new a.nv(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){a.bi.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),a.bi.remove(this.element,"focus",this.focusIn),a.bi.remove(this.element,"blur",this.focusOut),a.bi.remove(this.element,"mouseover",this.onMouseOver),a.bi.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(e,t){for(var i=[],n=e.parentNode;!(0,a.le)(n);)(0,a.wB)(n,t)&&i.push(n),n=n.parentNode;return i},t.prototype.isDoubleTapped=function(e){var t,i=e.originalEvent.target;return i&&e.tapCount&&(1===e.tapCount?this.firstTap=(0,a.oq)(i,"."+st):2===e.tapCount&&(t=(0,a.oq)(i,"."+st))),this.firstTap===t},t.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!(0,a.le)(i);){if(i===e)return!0;i=i.parentNode}return!1},t.prototype.showSpinner=function(e){(0,a.cn)([e],ct),(0,s.rj)({target:e,width:a.AR.isDevice?16:14},this.createElement),(0,s.yh)(e)},t.prototype.hideSpinner=function(e){(0,s.v3)(e),e.innerHTML="",(0,a.IV)([e],ct)},t.prototype.setCheckedNodes=function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)},t.prototype.setValidCheckedNode=function(e){if(1===this.dataType){var t=this.fields,i=new r.h(this.treeData).executeLocal((new o.A).where(t.id,"equal",e,!0));if(i[0]&&(this.setChildCheckState(i,e,i[0]),this.autoCheck)){for(var n=i[0][this.fields.parentID]?i[0][this.fields.parentID].toString():null,s=this.getChildNodes(this.treeData,n),l=0,d=0;d<s.length;d++){var c=s[d][this.fields.id].toString();-1!==this.checkedNodes.indexOf(c)&&l++}l===s.length&&-1===this.checkedNodes.indexOf(n)&&n&&this.checkedNodes.push(n)}}else if(2===this.dataType)for(var h=0;h<this.treeData.length;h++){if((this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():"")===e&&-1===this.checkedNodes.indexOf(e)){this.checkedNodes.push(e);break}var p=(0,a.NA)(this.fields.child.toString(),this.treeData[h]);p&&this.setChildCheckState(p,e,this.treeData[h])}},t.prototype.setChildCheckState=function(e,t,i){var n,s=0;if(1===this.dataType){i&&(n=i[this.fields.id]?i[this.fields.id].toString():null);for(var r=0;r<e.length;r++){var o=e[r][this.fields.id]?e[r][this.fields.id].toString():null;i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o),o===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(l=this.getChildNodes(this.treeData,o))&&this.setChildCheckState(l,t,i)}}else{i&&(n=i[this.fields.id]?i[this.fields.id].toString():"");for(r=0;r<e.length;r++){var l,d=e[r][this.fields.id]?e[r][this.fields.id].toString():"";i&&n&&this.autoCheck&&-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d),d===t&&-1===this.checkedNodes.indexOf(t)&&this.checkedNodes.push(t),(l=(0,a.NA)(this.fields.child.toString(),e[r]))&&this.setChildCheckState(l,t,e[r]),-1!==this.checkedNodes.indexOf(d)&&this.autoCheck&&s++,s===e.length&&-1===this.checkedNodes.indexOf(n)&&this.autoCheck&&this.checkedNodes.push(n)}}},t.prototype.setIndeterminate=function(e){for(var t=0;t<e.length;t++)this.setValidCheckedNode(e[t])},t.prototype.updatePosition=function(e,t,i,n){if(1===this.dataType){var a=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(a,1,t),i){this.removeChildNodes(e);for(var s=0;s<n.length;s++)this.treeData.splice(a,0,n[s]),a++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[t],void 0)},t.prototype.updateChildPosition=function(e,t,i,n,s){for(var o,l=0,d=e.length;l<d;l++){var c=(0,a.NA)(t.id,e[l]);if(e[l]&&c&&c.toString()===i)return e[l]=n[0],!0;if("string"!==typeof t.child||(0,a.le)((0,a.NA)(t.child,e[l]))){if(this.fields.dataSource instanceof r.h&&!(0,a.le)((0,a.NA)("child",e[l]))){var h=(0,a.NA)("child",e[l]);if(void 0!==(o=this.updateChildPosition(h,this.getChildMapper(t),i,n,s)))break}}else{var p=(0,a.NA)(t.child,e[l]);if(void 0!==(o=this.updateChildPosition(p,this.getChildMapper(t),i,n,s)))break}}return o},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(e,t,i,n,s,r,o){var l,d=this,c=this.fields.dataSource,h=[],p=this.getQuery(this.fields),u=this.fields.id,f={addedRecords:[],deletedRecords:[],changedRecords:[]},g=[];t?g=this.nodeType(t):i&&("string"==typeof i?g[0]=i.toString():"object"===typeof i&&(g[0]=i.getAttribute("data-uid").toString()));for(var m=0,y=g.length;m<y;m++){var v=this.getElement(g[m]);if(!(0,a.le)(v)){var b=this.getNodeObject(g[m]);h.push(b)}}switch(e){case"delete":1==t.length?l=c.remove(u,h[0],p.fromTable,p):(f.deletedRecords=h,l=c.saveChanges(f,u,p.fromTable,p)),l.then((function(e){return d.deleteSuccess(g)})).catch((function(e){return d.dmFailure(e)}));break;case"update":h[0][this.fields.text]=n,(l=c.update(u,h[0],p.fromTable,p)).then((function(e){return d.editSucess(i,n,o)})).catch((function(e){return d.dmFailure(e,i,o)}));break;case"insert":if(1==s.length)l=c.insert(s[0],p.fromTable,p);else{var C=[];for(m=0,y=s.length;m<y;m++)C.push(s[m]);f.addedRecords=C,l=c.saveChanges(f,u,p.fromTable,p)}l.then((function(e){var t=d.getElement(i);d.addSuccess(s,t,r),d.preventExpand=!1})).catch((function(e){return d.dmFailure(e)}))}},t.prototype.deleteSuccess=function(e){for(var t=0,i=e.length;t<i;t++){var n=this.getElement(e[t]);(0,a.le)(n)||this.removeNode(n)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()},t.prototype.editSucess=function(e,t,i){var n=this.getElement(e),s=(0,a.Ys)("."+rt,n);this.appendNewText(n,s,t,i)},t.prototype.addSuccess=function(e,t,i){var n,a=t?t.querySelector("."+pt):null,s=this;t&&a&&a.classList.contains(at)&&null===t.querySelector("."+ot)?s.renderChildNodes(t,null,(function(){n=t.querySelector("."+ot),s.addGivenNodes(e,t,i,!0,n),s.triggerEvent()})):(this.addGivenNodes(e,t,i,!0),this.triggerEvent())},t.prototype.dmFailure=function(e,t,i){t&&this.updatePreviousText(t,i),this.trigger("actionFailure",{error:e})},t.prototype.updatePreviousText=function(e,t){var i=this.getElement(e),n=(0,a.Ys)("."+rt,i);this.updateText(i,n,this.oldText,t)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var s=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(s,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=t.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:(0,a.le)(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var r=this.element.querySelectorAll("li"),o=0;o<r.length;)"true"!==r[o].getAttribute("aria-expanded")&&this.renderChildNodes(r[o],!0,null,!0),o++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes()}}},t.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),e.prototype.destroy.call(this)},t.prototype.addNodes=function(e,t,i,n){if(!(0,a.le)(e)){e=JSON.parse(JSON.stringify(e));var s=this.getElement(t);if(this.preventExpand=n,this.fields.dataSource instanceof r.h)this.isOffline?this.addSuccess(e,s,i):this.crudOperation("insert",null,t,null,e,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(e,s,i);else{if(s)this.addGivenNodes(e,s,i);else{e=this.getSortedData(e);for(var o=0;o<e.length;o++){var l=(0,a.NA)(this.fields.parentID,e[o]);s=l?this.getElement(l.toString()):l,this.addGivenNodes([e[o]],s,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&s&&this.ensureParentCheckState(s),this.fields.dataSource instanceof r.h===!1&&(this.preventExpand=!1,this.triggerEvent())}},t.prototype.beginEdit=function(e){var t=this.getElement(e);(0,a.le)(t)||this.disabled||this.createTextbox(t,null)},t.prototype.checkAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)},t.prototype.collapseAll=function(e,t,i){(0,a.le)(e)?t>0?this.collapseByLevel((0,a.Ys)("."+ot,this.element),t,i):this.collapseAllNodes(i):this.doGivenAction(e,nt,!1)},t.prototype.disableNodes=function(e){(0,a.le)(e)||this.doDisableAction(e)},t.prototype.enableNodes=function(e){(0,a.le)(e)||this.doEnableAction(e)},t.prototype.ensureVisible=function(e){var t=this.getElement(e);if(!(0,a.le)(t)){var i=this.parents(t,"."+st);this.expandAll(i),setTimeout((function(){t.scrollIntoView(!0)}),450)}},t.prototype.expandAll=function(e,t,i){(0,a.le)(e)?t>0?this.expandByLevel((0,a.Ys)("."+ot,this.element),t,i):this.expandAllNodes(i):this.doGivenAction(e,at,!0)},t.prototype.getAllCheckedNodes=function(){return this.checkedNodes},t.prototype.getDisabledNodes=function(){return this.disableNode},t.prototype.getNode=function(e){var t=this.getElement(e);return this.getNodeData(t,!0)},t.prototype.getTreeData=function(e){var t=this.getId(e);if(this.updatePersistProp(),(0,a.le)(t))return this.treeData;var i=this.getNodeObject(t);return(0,a.le)(i)?[]:[i]},t.prototype.moveNodes=function(e,t,i,n){var s=this.getElement(t);if(!(0,a.le)(s)){for(var o=0;o<e.length;o++){var l=this.getElement(e[o]);(0,a.le)(l)||s.isSameNode(l)||this.isDescendant(l,s)||(this.preventExpand=n,this.dropAsChildNode(l,s,this,i))}this.fields.dataSource instanceof r.h===!1&&(this.preventExpand=!1),this.triggerEvent()}},t.prototype.refreshNode=function(e,t){if(!(0,a.le)(e)&&!(0,a.le)(t)){var i,n=!1;if(1==this.dataType&&t.length>1)n=!0;else if(2==this.dataType&&1===t.length){var s=(0,a.NA)(this.fields.child.toString(),t[0]);(0,a.le)(s)||(n=!0)}var r,o,l=this.getElement(e);if(i=l?l.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(i),t=JSON.parse(JSON.stringify(t)),1==this.dataType&&n){for(var d=0;d<t.length;d++)if((0,a.le)(t[d][this.fields.parentID])){o=t[d],t.splice(d,1);break}r=(0,a.l7)({},this.refreshData,o)}else r=(0,a.l7)({},this.refreshData,t[0]);if((0,a.le)(l))this.updatePosition(i,r,n,t);else{this.isRefreshed=!0;var c=parseFloat(l.getAttribute("aria-level")),h=Xe.Kh.createListItemFromJson(this.createElement,[r],this.listBaseOption,c),p=(0,a.Ys)("."+ot,l),u=(0,a.NA)(this.fields.child.toString(),r);if(n&&p||n&&!(0,a.le)(u)){var f=l.parentElement,g=Array.prototype.indexOf.call(f.childNodes,l);(0,a.Od)(l),f.insertBefore(h[0],f.childNodes[g]),this.updatePosition(i,r,n,t),n&&p&&this.expandAll([i])}else{var m=(0,a.Ys)("."+ut,l),y=(0,a.Ys)("."+ut,h[0]),v=(0,a.Ys)("div."+pt,m),b=(0,a.Ys)("div."+pt,y);v&&b&&(b.classList.contains(at)&&v.classList.contains(nt)?((0,a.IV)([b],at),(0,a.cn)([b],nt)):b.classList.contains(nt)&&v.classList.contains(at)?((0,a.IV)([b],nt),(0,a.cn)([b],at)):v.classList.contains("interaction")&&(0,a.cn)([b],"interaction")),(0,a.Od)(m);var C=(0,a.Ys)("."+Dt,l);C.parentNode.insertBefore(y,C.nextSibling),this.updatePosition(i,r,n,t)}if(l=this.getElement(e),r[this.fields.tooltip]&&l.setAttribute("title",r[this.fields.tooltip]),r.hasOwnProperty(this.fields.htmlAttributes)&&r[this.fields.htmlAttributes]){var S={};(0,a.TS)(S,r[this.fields.htmlAttributes]),S.class?((0,a.cn)([l],S.class.split(" ")),delete S.class):(0,a.Y4)(l,S)}-1!==this.selectedNodes.indexOf(i)&&(l.setAttribute("aria-selected","true"),(0,a.cn)([l],dt)),this.isRefreshed=!1,this.triggerEvent()}}},t.prototype.removeNodes=function(e){(0,a.le)(e)||(this.fields.dataSource instanceof r.h&&!this.isOffline?this.crudOperation("delete",e):this.deleteSuccess(e))},t.prototype.updateNode=function(e,t){var i=this;if(!(0,a.le)(e)&&!(0,a.le)(t)&&this.allowEditing){var n=this.getElement(e);if(!(0,a.le)(n)){var s=(0,a.Ys)("."+rt,n);this.updateOldText(n);var o=this.getEditEvent(n,null,null);this.trigger("nodeEditing",o,(function(a){a.cancel||(i.fields.dataSource instanceof r.h&&!i.isOffline?i.crudOperation("update",null,e,t,null,null,!1):i.appendNewText(n,s,t,!1))}))}}},t.prototype.uncheckAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)},et([(0,a.Z9)(!1)],t.prototype,"allowDragAndDrop",void 0),et([(0,a.Z9)(!1)],t.prototype,"allowEditing",void 0),et([(0,a.Z9)(!1)],t.prototype,"allowMultiSelection",void 0),et([(0,a.Z9)(!1)],t.prototype,"allowTextWrap",void 0),et([(0,a.Zz)({},_t)],t.prototype,"animation",void 0),et([(0,a.Z9)()],t.prototype,"checkedNodes",void 0),et([(0,a.Z9)("")],t.prototype,"cssClass",void 0),et([(0,a.Z9)(!1)],t.prototype,"disabled",void 0),et([(0,a.Z9)(null)],t.prototype,"dragArea",void 0),et([(0,a.Z9)(!1)],t.prototype,"enableHtmlSanitizer",void 0),et([(0,a.Z9)(!1)],t.prototype,"enablePersistence",void 0),et([(0,a.Z9)()],t.prototype,"expandedNodes",void 0),et([(0,a.Z9)("Auto")],t.prototype,"expandOn",void 0),et([(0,a.Zz)({},Yt)],t.prototype,"fields",void 0),et([(0,a.Z9)(!0)],t.prototype,"fullRowSelect",void 0),et([(0,a.Z9)(!0)],t.prototype,"loadOnDemand",void 0),et([(0,a.Z9)()],t.prototype,"locale",void 0),et([(0,a.Z9)()],t.prototype,"nodeTemplate",void 0),et([(0,a.Z9)()],t.prototype,"selectedNodes",void 0),et([(0,a.Z9)("None")],t.prototype,"sortOrder",void 0),et([(0,a.Z9)(!1)],t.prototype,"showCheckBox",void 0),et([(0,a.Z9)(!0)],t.prototype,"autoCheck",void 0),et([(0,a.Z9)(!1)],t.prototype,"fullRowNavigable",void 0),et([(0,a.ju)()],t.prototype,"actionFailure",void 0),et([(0,a.ju)()],t.prototype,"created",void 0),et([(0,a.ju)()],t.prototype,"dataBound",void 0),et([(0,a.ju)()],t.prototype,"dataSourceChanged",void 0),et([(0,a.ju)()],t.prototype,"drawNode",void 0),et([(0,a.ju)()],t.prototype,"destroyed",void 0),et([(0,a.ju)()],t.prototype,"keyPress",void 0),et([(0,a.ju)()],t.prototype,"nodeChecked",void 0),et([(0,a.ju)()],t.prototype,"nodeChecking",void 0),et([(0,a.ju)()],t.prototype,"nodeClicked",void 0),et([(0,a.ju)()],t.prototype,"nodeCollapsed",void 0),et([(0,a.ju)()],t.prototype,"nodeCollapsing",void 0),et([(0,a.ju)()],t.prototype,"nodeDragging",void 0),et([(0,a.ju)()],t.prototype,"nodeDragStart",void 0),et([(0,a.ju)()],t.prototype,"nodeDragStop",void 0),et([(0,a.ju)()],t.prototype,"nodeDropped",void 0),et([(0,a.ju)()],t.prototype,"nodeEdited",void 0),et([(0,a.ju)()],t.prototype,"nodeEditing",void 0),et([(0,a.ju)()],t.prototype,"nodeExpanded",void 0),et([(0,a.ju)()],t.prototype,"nodeExpanding",void 0),et([(0,a.ju)()],t.prototype,"nodeSelected",void 0),et([(0,a.ju)()],t.prototype,"nodeSelecting",void 0),t=i=et([a.Zl],t)}(a.wA),Kt=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=(0,a.az)("div",{className:Ne,innerHTML:'<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons e-icon-menu"></div></div><div class="e-toolbar-level-title"><div class="e-toolbar-swimlane-name"></div></div></div>'});this.parent.element.appendChild(e),a.bi.add(e.querySelector(".e-icon-menu"),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector(".e-swimlane-header").offsetHeight,t=window.innerHeight-e;this.popupOverlay=(0,a.az)("div",{className:Ae,styles:"height: "+t+"px;"});var i=(0,a.az)("div",{className:De,styles:"top:"+e+"px;"}),n=(0,a.az)("div",{className:"e-swimlane-resource e-popup-close",styles:"height: "+t+"px;"});i.appendChild(n),i.appendChild(this.popupOverlay),this.parent.element.appendChild(i);var s=(0,a.az)("div",{className:"e-swimlane-tree"});n.appendChild(s),this.treeViewObj=new Zt({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:this.parent.layoutModule.kanbanRows,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this),drawNode:this.drawNode.bind(this)}),this.treeViewObj.appendTo(s);var r={targetType:"relative",actionOnScroll:"none",enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+U)};r.content=this.treeViewObj.element,this.treePopup=new We.GI(n,r)},e.prototype.menuClick=function(){if(this.parent.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open"))this.treePopup.hide(),(0,a.IV)([this.popupOverlay],"e-enable");else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));(0,a.IV)(e,"e-active"),(0,a.cn)([e[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),(0,a.cn)([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(g,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.hidePopup=function(){this.treePopup.hide(),(0,a.IV)([this.popupOverlay],"e-enable")},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e.prototype.drawNode=function(e){if(this.parent.swimlaneSettings.template&&this.parent.isReact){var t=this.parent.element.id+"_treeviewTemplate",i=this.parent.templateParser(this.parent.swimlaneSettings.template)(e.nodeData,this.parent,"nodeTemplate",t,!1);(0,a.R3)(i,e.node.querySelector(".e-list-text"))}},e}(),Wt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ut=function(e){function t(t){var i=e.call(this,t)||this;return i.kanbanRows=[],i.parent=t,i.columnKeys=[],i.swimlaneIndex=0,i.swimlaneData={},i.scrollLeft=0,i.frozenOrder=0,i.parent.on(g,i.initRender,i),i.parent.on(f,i.scrollUiUpdate,i),i}return Wt(t,e),t.prototype.initRender=function(){if(0!==this.parent.columns.length){if(this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+U);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(g,this.initRender,this),this.parent.on(f,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&0!==this.parent.kanbanData.length&&this.renderSwimlaneHeader();var t=(0,a.az)("div",{className:Y});this.parent.element.appendChild(t),this.renderHeader(t),this.renderContent(),this.renderCards(),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(f,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.renderHeader=function(e){var t=(0,a.az)("div",{className:this.parent.swimlaneSettings.keyField?z:""});e.appendChild(t);var i=(0,a.az)("table",{className:B+" e-header-table",attrs:{role:"presentation"}});t.appendChild(i),this.renderColGroup(i);var n=(0,a.az)("thead");i.appendChild(n),this.parent.stackedHeaders.length>0&&n.appendChild(this.createStackedRow(this.parent.stackedHeaders));var s=(0,a.az)("tr",{className:X});n.appendChild(s);for(var r=function(e){if(o.isColumnVisible(e)){var t=o.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),i=(0,a.az)("th",{className:-1===t?V:"e-header-cells e-collapsed",attrs:{"data-role":"kanban-column","data-key":e.keyField.toString()}}),n=[];e.allowToggle&&(n.push(G),e.isExpanded||n.push(he)),(0,a.cn)([i],n);var r=(0,a.az)("div",{className:_});i.appendChild(r);var l=o.columnData[e.keyField].length,d=(0,a.az)("div",{className:"e-header-title"});if(r.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:l};(0,a.cn)([i],H);var h=o.parent.element.id+"_columnTemplate",u=o.parent.templateParser(e.template)(c,o.parent,"columnTemplate",h,!1);(0,a.R3)(u,d)}else{var f=(0,a.az)("div",{className:Z,innerHTML:e.headerText});if(d.appendChild(f),e.showItemCount){var g=(0,a.az)("div",{className:te,innerHTML:"- "+l.toString()+" "+o.parent.localeObj.getConstant("items")});d.appendChild(g)}}if(e.allowToggle){var m=!(!e.isExpanded||-1!==t),y=m?le:de,v=(0,a.az)("div",{className:"e-header-icon e-icons "+y,attrs:{tabindex:"0"}});v.setAttribute("aria-label",m?e.keyField+" Expand":e.keyField+" Collapse"),i.setAttribute("aria-expanded",m.toString()),r.appendChild(v)}var b={data:[{keyField:e.keyField,textField:e.headerText,count:l}],element:s,cancel:!1,requestType:"headerRow"};o.parent.trigger(p,b,(function(e){e.cancel||s.appendChild(i)}))}},o=this,l=0,d=this.parent.columns;l<d.length;l++){r(d[l])}},t.prototype.renderContent=function(){var e=(0,a.az)("div",{className:U});this.parent.element.appendChild(e);var t=(0,a.az)("div",{className:this.parent.swimlaneSettings.keyField?z:""});e.appendChild(t);var i=(0,a.az)("table",{className:"e-kanban-table e-content-table",attrs:{role:"presentation"}});t.appendChild(i),this.renderColGroup(i);var n=(0,a.az)("tbody");i.appendChild(n);var s=!1;this.swimlaneRow=this.kanbanRows,this.initializeSwimlaneTree();for(var r=0,o=this.swimlaneRow;r<o.length;r++){var l=o[r];if(this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length)s=-1!==this.parent.swimlaneToggleArray.indexOf(l.keyField);this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive&&this.renderSwimlaneRow(n,l,s),this.renderSingleContent(n,l,s)}},t.prototype.renderSingleContent=function(e,t,i){for(var n=i?"e-content-row e-collapsed":Q,s=(0,a.az)("tr",{className:n,attrs:{"aria-expanded":"true"}}),r=0,o=this.parent.columns;r<o.length;r++){var l=o[r];if(this.isColumnVisible(l)){var d=this.parent.actionModule.columnToggleArray.indexOf(l.keyField.toString()),c=-1===d?W:"e-content-cells e-collapsed",h=(l.allowDrag?" e-drag":"")+(l.allowDrop?" e-drop e-droppable":""),u=(0,a.az)("td",{className:c+h,attrs:{"data-role":"kanban-column","data-key":l.keyField.toString(),"aria-expanded":"true",tabindex:"0",role:"navigation"}});if(l.allowToggle&&!l.isExpanded||-1!==d){(0,a.cn)([u],he);var f=(l.showItemCount?"["+this.getColumnData(l.keyField,this.swimlaneData[t.keyField]).length+"] ":"")+l.headerText;u.appendChild((0,a.az)("div",{className:ce,innerHTML:f})),u.setAttribute("aria-expanded","false")}if(l.showAddButton){var g=(0,a.az)("div",{className:Le,attrs:{tabindex:"-1"}});g.appendChild((0,a.az)("div",{className:"e-show-add-icon e-icons"})),u.appendChild(g)}s.appendChild(u)}}var m={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:s,cancel:!1,requestType:"contentRow"};this.parent.trigger(p,m,(function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",s):e.appendChild(s))}))},t.prototype.initializeSwimlaneTree=function(){this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&0!==this.parent.kanbanData.length&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector(".e-toolbar-swimlane-name").innerHTML=this.swimlaneRow[0].textField)},t.prototype.renderSwimlaneRow=function(e,t,i){var n=i?" e-collapsed":"",s=(0,a.az)("tr",{className:"e-content-row e-swimlane-row"+n,attrs:{"data-key":t.keyField,"aria-expanded":(!i).toString()}}),r=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,o=(0,a.az)("td",{className:W,attrs:{"data-role":"kanban-column",colspan:r.toString()}}),l=(0,a.az)("div",{className:Ne});o.appendChild(l);var d=i?ee:$,c=(0,a.az)("div",{className:"e-icons "+d,attrs:{tabindex:"0","aria-label":i?t.keyField+" Collapse":t.keyField+" Expand"}});l.appendChild(c);var h=(0,a.az)("div",{className:_});l.appendChild(h);var u=this.swimlaneData[t.keyField].length;if(this.parent.swimlaneSettings.template){var f=(0,a.l7)({},t,{count:u},!0);(0,a.cn)([o],H);var g=this.parent.element.id+"_swimlaneTemplate",m=this.parent.templateParser(this.parent.swimlaneSettings.template)(f,this.parent,"swimlaneTemplate",g,!1);(0,a.R3)(m,h)}else h.appendChild((0,a.az)("div",{className:"e-swimlane-text",innerHTML:t.textField,attrs:{"data-role":t.textField}}));this.parent.swimlaneSettings.showItemCount&&l.appendChild((0,a.az)("div",{className:te,innerHTML:"- "+u.toString()+" "+this.parent.localeObj.getConstant("items")})),s.appendChild(o);var y={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:s,cancel:!1,requestType:"swimlaneRow"};this.parent.trigger(p,y,(function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",s):e.appendChild(s))}))},t.prototype.renderCards=function(){var e=this,t=this.swimlaneRow,i=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),s=[];i.forEach((function(i,r){for(var o=0,l=function(n){if(e.isColumnVisible(n)){var s=e.parent.swimlaneSettings.keyField?e.getColumnData(n.keyField,e.swimlaneData[t[r].keyField]):e.columnData[n.keyField];o+=s.length;var l=i.querySelector('[data-key="'+n.keyField+'"]'),d=(0,a.az)("div",{className:ie,attrs:{role:"listbox"}});if(l.appendChild(d),s.length>0)for(var c=function(t){var i=t[e.parent.cardSettings.headerField],n=e.parent.actionModule.selectionArray.indexOf(i),s=e.renderCard(t);-1!==n&&(s.setAttribute("aria-selected","true"),(0,a.cn)([s],xe));var r={data:t,element:s,cancel:!1};e.parent.trigger(h,r,(function(e){e.cancel||d.appendChild(s)}))},p=0,u=s;p<u.length;p++){c(u[p])}else d.appendChild(e.renderEmptyCard())}},d=0,c=e.parent.columns;d<c.length;d++){l(c[d])}0===o&&(s.push(i),n.length>0&&s.push(n[r]))})),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||s.forEach((function(e){return(0,a.Od)(e)}))},t.prototype.renderCard=function(e){var t=(0,a.az)("div",{className:ne,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if(this.parent.cardSettings.template){(0,a.cn)([t],H);var i=this.parent.element.id+"_cardTemplate",n=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",i,!1);(0,a.R3)(n,t)}else{var s=this.parent.enableTooltip?" e-tooltip-text":"";if(this.parent.cardSettings.showHeader){var r=(0,a.az)("div",{className:"e-card-header"}),o=(0,a.az)("div",{className:"e-card-header-caption"}),l=(0,a.az)("div",{className:"e-card-header-title"+s,innerHTML:e[this.parent.cardSettings.headerField]||""});r.appendChild(o),o.appendChild(l),t.appendChild(r)}var d=(0,a.az)("div",{className:"e-card-content"+s,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(d),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var c=(0,a.az)("div",{className:"e-card-tags"}),h=0,p=e[this.parent.cardSettings.tagsField].toString().split(",");h<p.length;h++){var u=p[h];c.appendChild((0,a.az)("div",{className:"e-card-tag e-card-label",innerHTML:u}))}t.appendChild(c)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&((0,a.cn)([t],"e-card-color"),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var f=(0,a.az)("div",{className:"e-card-footer"}),g=0,m=e[this.parent.cardSettings.footerCssField].split(",");g<m.length;g++){var y=m[g];f.appendChild((0,a.az)("div",{className:y.trim()+" e-card-footer-css"}))}t.appendChild(f)}}return t},t.prototype.renderEmptyCard=function(){return(0,a.az)("span",{className:oe,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,i=(0,a.az)("colgroup");this.parent.columns.forEach((function(e){if(t.isColumnVisible(e)){var n=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),s=e.allowToggle&&!e.isExpanded,r=-1===n?s?he:"":he,o=(0,a.az)("col",{className:r,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(s?(0,a.Ac)(50):(0,a.Ac)(t.getWidth())):""});i.appendChild(o)}})),e.appendChild(i)},t.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map((function(i){if(e.parent.swimlaneSettings.showEmptyRow||!((0,a.le)(i[e.parent.keyField])||""===i[e.parent.keyField]||i[e.parent.keyField]&&-1===e.columnKeys.indexOf(i[e.parent.keyField].toString()))){var n=i[e.parent.swimlaneSettings.textField]||i[e.parent.swimlaneSettings.keyField],s=i[e.parent.swimlaneSettings.keyField];if(!i[e.parent.swimlaneSettings.keyField]){if(!e.parent.swimlaneSettings.showUnassignedRow)return;n=e.parent.localeObj.getConstant("unassigned"),s=""}t.push({keyField:s,textField:n})}})),t=t.filter((function(e,t,i){return t===i.map((function(e){return e.keyField})).indexOf(e.keyField)})),(t=this.swimlaneSorting(t)).forEach((function(t){t.count=e.parent.kanbanData.filter((function(i){return e.columnKeys.indexOf(i[e.parent.keyField])>-1&&i[e.parent.swimlaneSettings.keyField]===t.keyField})).length})),0===t.length&&t.push({keyField:"",textField:""})):t.push({keyField:"",textField:""}),t},t.prototype.swimlaneSorting=function(e){return this.parent.swimlaneSettings.sortComparer?e=this.parent.swimlaneSettings.sortComparer.call(this.parent,e):(e.sort((function(e,t){return e.textField.localeCompare(t.textField,void 0,{numeric:!0})})),"Descending"===this.parent.swimlaneSettings.sortDirection&&e.reverse()),e},t.prototype.createStackedRow=function(e){var t=(0,a.az)("tr",{className:"e-header-row e-stacked-header-row"}),i=[];this.parent.columns.forEach((function(t){for(var n="",a=0,s=e;a<s.length;a++){var r=s[a];-1!==r.keyFields.indexOf(t.keyField.toString())&&(n=r.text)}i.push(n)}));for(var n=0;n<i.length;n++){for(var s=1,r=n+1;r<i.length&&(""!==i[n]&&""!==i[r]&&i[n]===i[r]);r++)s++;var o=(0,a.az)("div",{className:Z,innerHTML:i[n]}),l=(0,a.az)("th",{className:"e-header-cells e-stacked-header-cell",attrs:{colspan:s.toString()}});t.appendChild(l).appendChild(o),n+=s-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+Y),i=this.parent.element.querySelector("."+U),n=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){n=window.innerHeight-(t.offsetHeight+25);var s=this.parent.element.querySelector(".e-swimlane-header");s&&(n-=s.offsetHeight),[].slice.call(this.parent.element.querySelectorAll(".e-content-cells")).forEach((function(t){var i=t.querySelector(".e-card-wrapper");i.classList.contains(Se)||(i.style.height=(0,a.Ac)(n),a.bi.add(t,"touchmove",e.onAdaptiveScroll,e))}))}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(i.style.height=(0,a.Ac)(n)),[].slice.call(t.children).forEach((function(t){var n=0;i.offsetWidth-i.clientWidth>0&&(n=17,i.offsetHeight-i.clientHeight>0&&(t.style.width=(0,a.Ac)(i.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=(0,a.Ac)(n):t.style.paddingRight=(0,a.Ac)(n)})),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,i=this.parent.element.querySelector("."+Y);[].slice.call(i.children).forEach((function(e){e.scrollLeft=t.scrollLeft})),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!(0,a.le)(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},t.prototype.addFrozenSwimlaneDataKey=function(e){var t=e.getAttribute("data-key");(0,a.le)(t)||this.frozenSwimlaneRow.setAttribute("data-key",t)},t.prototype.frozenRows=function(e){var t=this.parent.element.querySelector(".e-swimlane-row"),i=this.parent.element.querySelector("."+Y),n=this.parent.element.querySelector("."+U);if((0,a.le)(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=(0,a.az)("div",{className:je});var s=(0,a.az)("div",{className:qe});this.frozenSwimlaneRow.appendChild(s),this.parent.element.insertBefore(this.frozenSwimlaneRow,this.parent.element.firstElementChild),s.appendChild(t.querySelector(".e-swimlane-header").cloneNode(!0)),this.addFrozenSwimlaneDataKey(t),(0,a.V7)(this.frozenSwimlaneRow,{height:(0,a.Ac)(t.getBoundingClientRect().height),width:(0,a.Ac)(n.querySelector(".e-swimlane").getBoundingClientRect().width),top:(0,a.Ac)(i.getBoundingClientRect().height.toString())}),(0,a.V7)(i,{position:"relative",top:(0,a.Ac)(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),(0,a.V7)(n,{position:"relative",top:(0,a.Ac)(-this.frozenSwimlaneRow.getBoundingClientRect().height)})}else{var r=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),o=r[this.frozenOrder],l=r[this.frozenOrder-1],d=r[this.frozenOrder+1],c=void 0,h=void 0,p=void 0;o&&(c=o.getBoundingClientRect().top+o.getBoundingClientRect().height),l&&(h=l.getBoundingClientRect().top+l.getBoundingClientRect().height),d&&(p=d.getBoundingClientRect().top+d.getBoundingClientRect().height);var u=n.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,f=this.frozenSwimlaneRow.querySelector(".e-frozen-row");p&&u>=p&&this.frozenOrder<r.length-1?(f&&((0,a.Od)(f.querySelector(".e-swimlane-header")),f.appendChild(d.querySelector(".e-swimlane-header").cloneNode(!0)),this.addFrozenSwimlaneDataKey(d)),++this.frozenOrder):h&&u<c&&u>h&&this.frozenOrder>0&&(f&&((0,a.Od)(f.querySelector(".e-swimlane-header")),f.appendChild(l.querySelector(".e-swimlane-header").cloneNode(!0)),this.addFrozenSwimlaneDataKey(l)),--this.frozenOrder)}e&&0==e.target.scrollTop&&this.removeFrozenRows()},t.prototype.removeFrozenRows=function(){(0,a.Od)(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var e=this.parent.element.querySelector("."+Y),t=this.parent.element.querySelector("."+U);(0,a.V7)(e,{position:"",top:""}),(0,a.V7)(t,{position:"",top:""}),this.parent.scrollPosition.content={left:this.parent.scrollPosition.content.left,top:0},t.scrollTop=0,this.frozenOrder=0},t.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var i=t.offsetParent.getAttribute("data-key");this.parent.scrollPosition.column[i]={left:t.scrollLeft,top:t.scrollTop}}},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,i=!1;return"number"===typeof e.keyField?i=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach((function(e){i=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)})),i},t.prototype.renderLimits=function(e,t){var i=(0,a.az)("div",{className:Oe});e.minCount&&i.appendChild((0,a.az)("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&i.appendChild((0,a.az)("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),i.childElementCount>0&&(t.querySelector(".e-card-wrapper")?t.insertBefore(i,t.firstElementChild):t.appendChild(i))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach((function(t){if(t.minCount||t.maxCount){var i=e.columnData[t.keyField],n='[data-key="'+t.keyField+'"]',s=e.parent.element.querySelector("."+(V+n)),r=[].slice.call(e.parent.element.querySelectorAll("."+(W+n)));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach((function(n,s){e.renderLimits(t,r[s]);var o=i.filter((function(t){return t[e.parent.swimlaneSettings.keyField]===n.keyField})),l=e.getValidationClass(t,o.length);l&&(0,a.cn)([r[s]],l)}));else{e.renderLimits(t,s);var o=e.getValidationClass(t,i.length);o&&(0,a.cn)(r.concat(s),o)}}}))},t.prototype.getValidationClass=function(e,t){var i;return e.maxCount&&t>e.maxCount?i=Ee:e.minCount&&t<e.minCount&&(i=Te),i},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll(".e-limits")).forEach((function(e){(0,a.Od)(e)}));var e=[].slice.call(this.parent.element.querySelectorAll(".e-min-color"));(0,a.IV)(e,Te);var t=[].slice.call(this.parent.element.querySelectorAll(".e-max-color"));(0,a.IV)(t,Ee),this.renderValidation()},t.prototype.getColumnData=function(e,t){var i=this;void 0===t&&(t=this.parent.kanbanData);var n=[];if("number"===typeof e){var a=t.filter((function(t){return t[i.parent.keyField]===e}));n=n.concat(a)}else for(var s=function(e){var a=t.filter((function(t){return t[i.parent.keyField]===e.trim()}));n=n.concat(a)},r=0,o=e.split(",");r<o.length;r++){s(o[r])}return this.sortCategory(n),n},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,i=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,i,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,i,e)}return e},t.prototype.sortOrder=function(e,t,i){var n,a,s=!0;return this.parent.kanbanData.length>0&&(s="number"===typeof this.parent.kanbanData[0][e]),s||"Index"!==this.parent.sortSettings.sortBy?(i=i.sort((function(t,i){return s?(n=t[e],a=i[e]):(n=t[e].toLowerCase(),a=i[e].toLowerCase()),n>a?1:a>n?-1:0})),"Descending"===t&&i.reverse(),i):i},t.prototype.documentClick=function(e){if(e.target.classList.contains(Ae)&&this.parent.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")&&(this.treePopup.hide(),(0,a.IV)([this.popupOverlay],"e-enable")),!(0,a.oq)(e.target,".e-kanban")){var t=[].slice.call(this.parent.element.querySelectorAll(".e-card.e-selection"));(0,a.IV)(t,xe),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},t.prototype.getColumnCards=function(e){var t=this,i={};return this.columnKeys=[],this.parent.columns.forEach((function(n){var a="number"===typeof n.keyField;t.columnKeys=a?t.columnKeys.concat(n.keyField.toString()):t.columnKeys.concat(n.keyField.split(",").map((function(e){return e.trim()})));var s=t.getColumnData(n.keyField,e);i[n.keyField]=s})),i},t.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach((function(i){return t[i.keyField]=e.parent.kanbanData.filter((function(t){return!(0,a.le)(t[e.parent.keyField])&&e.columnKeys.indexOf(t[e.parent.keyField].toString())>-1&&(!t[e.parent.swimlaneSettings.keyField]&&e.parent.swimlaneSettings.showUnassignedRow?"":t[e.parent.swimlaneSettings.keyField])===i.keyField}))})),t},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+Y);[].slice.call(e.children).forEach((function(e){return(0,a.Od)(e)})),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll(".e-card-wrapper")).forEach((function(e){return(0,a.Od)(e)})),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;(this.parent.columns.forEach((function(i){if(i.showItemCount){i&&i.template&&!t&&(e.refreshHeaders(),t=!0);var n='.e-header-cells[data-key="'+i.keyField+'"] .'+te,a=e.parent.element.querySelector(n);if(a){var s=0;if("number"===typeof i.keyField)s=[].slice.call(e.parent.element.querySelectorAll('.e-card[data-key="'+i.keyField+'"]')).length;else for(var r=0,o=i.keyField.split(",");r<o.length;r++){var l=o[r];s=[].slice.call(e.parent.element.querySelectorAll('.e-card[data-key="'+l.trim()+'"]')).length+s}a.innerHTML="-\xa0"+s+"\xa0"+e.parent.localeObj.getConstant("items")}}})),this.parent.swimlaneSettings.keyField)&&[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")).forEach((function(t){var i=t.getAttribute("data-key"),n=t.querySelector(".e-item-count");if(n&&i){var a=[].slice.call(t.nextElementSibling.querySelectorAll(".e-card"));n.innerHTML="-\xa0"+a.length+"\xa0"+e.parent.localeObj.getConstant("items")}}));this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+U);t&&t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top),[].slice.call(this.parent.element.querySelectorAll(".e-card-wrapper")).forEach((function(t){if(t.offsetParent){var i=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];i&&t.scrollTo(i.left,i.top)}}))},t.prototype.renderCardBasedOnIndex=function(e,t){var i=this,n=e[this.parent.keyField],s=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if(this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive){var r='.e-content-row.e-swimlane-row[data-key="'+e[this.parent.swimlaneSettings.keyField]+'"]';if(this.parent.element.querySelector(r))s=this.parent.element.querySelector(r).nextElementSibling;else{if(-1!==this.columnKeys.indexOf(n)&&-1===this.parent.actionModule.hideColumnKeys.indexOf(n)){var o=this.kanbanRows.findIndex((function(t){return t.keyField===e[i.parent.swimlaneSettings.keyField]})),l=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),d=this.parent.element.querySelector(".e-content-table tbody");l[o]&&(d=l[o]),this.renderSwimlaneRow(d,this.kanbanRows[o],!1),this.renderSingleContent(d,this.kanbanRows[o],!1)}s=this.parent.element.querySelector(r).nextElementSibling,[].slice.call(s.children).forEach((function(e){var t=(0,a.az)("div",{className:ie});e.appendChild(t),t.appendChild(i.renderEmptyCard())}))}}if("Index"!==this.parent.sortSettings.sortBy){var c=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(c=this.parent.sortSettings.field),(0,a.le)(this.parent.swimlaneSettings.keyField))t=this.getColumnData(n,this.parent.kanbanData).findIndex((function(t){return t[c]===e[c]}));else{var p=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(n,p).findIndex((function(t){return t[c]===e[c]}))}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(s){var u=[].slice.call(s.children).filter((function(e){return-1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(n.toString().replace(/\s/g,""))}))[0],f=u.querySelector(".e-card-wrapper"),g=f.querySelector(".e-empty-card");g&&(0,a.Od)(g);var m=this.renderCard(e);this.parent.allowDragAndDrop&&u.classList.contains(se)&&(this.parent.dragAndDropModule.wireDragEvents(m),(0,a.cn)([m],ae));var y={data:e,element:m,cancel:!1};this.parent.trigger(h,y,(function(e){e.cancel||((0,a.le)(t)||0===f.children.length?f.appendChild(m):f.insertBefore(m,f.childNodes[t]))}))}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],i=this.parent.element.querySelector('.e-card[data-id="'+t+'"]');this.isSelectedCard=!!i.classList.contains(xe);var n=i.parentElement;i&&(0,a.Od)(i),0===n.querySelectorAll(".e-card:not(.e-cloned-card)").length&&n.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;a.bi.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),a.bi.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),a.bi.add(document,a.AR.touchStartEvent,this.documentClick,this);var t=this.parent.element.querySelector("."+U);a.bi.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll(".e-card-wrapper")).forEach((function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),a.bi.add(t,"scroll",e.onColumnScroll,e)})),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;a.bi.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),a.bi.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),a.bi.remove(document,a.AR.touchStartEvent,this.documentClick);var t=this.parent.element.querySelector("."+U);t&&(a.bi.remove(t,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent()),[].slice.call(this.parent.element.querySelectorAll(".e-card-wrapper")).forEach((function(t){a.bi.remove(t,"scroll",e.onColumnScroll)})),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll(".e-content-cells.e-drag .e-card"));(0,a.cn)(t,ae),t.forEach((function(t){return e.parent.dragAndDropModule.wireDragEvents(t)}))}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-content-cells.e-drag .e-card"));(0,a.IV)(t,ae),t.forEach((function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)}))},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(g,this.initRender),this.parent.off(f,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+Y);e&&(0,a.Od)(e);var t=this.parent.element.querySelector("."+U);t&&(0,a.Od)(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var i=this.parent.element.querySelector(".e-swimlane-header");i&&(0,a.Od)(i);var n=this.parent.element.querySelector(".e-swimlane-content");n&&(0,a.Od)(n)},t}(Kt),Gt=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xt=function(e,t,i,n){var a,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(r=(s<3?a(r):s>3?a(t,i,r):a(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Qt=function(e){function t(t,i){return e.call(this,t,i)||this}return Gt(t,e),t.prototype.preRender=function(){this.isAdaptive=a.AR.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null};this.localeObj=new a.E7(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected",addTitle:"Add New Card",editTitle:"Edit Card Details",deleteTitle:"Delete Card",deleteContent:"Are you sure you want to delete this card?",save:"Save",delete:"Delete",cancel:"Cancel",yes:"Yes",no:"No",close:"Close",noCard:"No cards to display",unassigned:"Unassigned"},this.locale),this.scrollPosition={content:{left:0,top:0},column:{}},this.isInitialRender=!0},t.prototype.requiredModules=function(){return[]},t.prototype.getPersistData=function(){return this.dataSource.length>0?this.addOnPersist(["columns","dataSource","swimlaneToggleArray"]):this.addOnPersist(["columns","kanbanData","swimlaneToggleArray"])},t.prototype.getModuleName=function(){return"kanban"},t.prototype.render=function(){var e=[M],t=[];this.enableRtl?e.push(I):t.push(I),this.isAdaptive?e.push(P):t.push(P),this.cssClass&&e.push(this.cssClass),this.element.setAttribute("role","main"),(0,a.s1)(this.element,e,t),this.element.style.width=(0,a.Ac)(this.width),this.element.style.height=(0,a.Ac)(this.height),(0,s.rj)({target:this.element}),this.showSpinner(),this.initializeModules()},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"cssClass":t.cssClass&&(0,a.IV)([this.element],t.cssClass),e.cssClass&&(0,a.cn)([this.element],e.cssClass);break;case"enableRtl":case"locale":this.refresh();break;case"width":this.element.style.width=(0,a.Ac)(e.width),this.element.querySelector("."+Y).firstElementChild.style.width="auto",this.notify(f,{});break;case"height":this.element.style.height=(0,a.Ac)(e.height),this.element.querySelector("."+U).style.height="auto",this.notify(f,{});break;case"dataSource":case"query":this.dataModule&&this.dataModule.setState({isDataChanged:!1}),this.dataModule=new y(this);break;case"columns":case"constraintType":case"sortSettings":this.notify(g,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,t.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,t.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.layoutModule.wireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new Ke(this),this.layoutModule.refreshCards());break;case"dialogSettings":e.dialogSettings&&(this.dialogModule=new Ve(this));break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new _e(this));break;case"stackedHeaders":this.layoutModule.refreshHeaders()}}},t.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortDirection":this.notify(g,{processedData:this.kanbanData});break;case"enableFrozenRows":this.layoutModule.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.layoutModule.removeFrozenRows()}}},t.prototype.onCardSettingsPropertyChanged=function(e,t){for(var i=[],n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"showHeader":case"headerField":case"contentField":case"template":case"tagsField":case"grabberField":case"footerCssField":this.layoutModule.refreshCards();break;case"selectionType":(i=this.getSelectedCards()).length>0&&((0,a.IV)(i,xe),this.layoutModule.disableAttributeSelection(i))}}},t.prototype.initializeModules=function(){this.dataModule=new y(this),this.layoutModule=new Ut(this),this.allowKeyboard&&(this.keyboardModule=new _e(this)),this.actionModule=new Re(this),this.crudModule=new Me(this),this.dragAndDropModule=new Ie(this),this.dialogModule=new Ve(this),this.enableTooltip&&(this.tooltipModule=new Ke(this)),(a.AR.isDevice||a.AR.isTouch)&&(this.touchModule=new Ge(this))},t.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},t.prototype.resetTemplates=function(e){this.isReact&&this.clearTemplate(e)},t.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.dialogModule=null,this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return(0,a.MY)(document.querySelector(e).innerHTML.trim())}catch(t){return(0,a.MY)(e)}},t.prototype.getCardDetails=function(e){var t=this,i="number"===typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter((function(e){return e[t.cardSettings.headerField]===i}))[0]},t.prototype.getColumnData=function(e,t){return this.layoutModule.getColumnCards(t)[e]||[]},t.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[e]||[]},t.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},t.prototype.showSpinner=function(){(0,s.yh)(this.element)},t.prototype.hideSpinner=function(){(0,s.v3)(this.element)},t.prototype.openDialog=function(e,t){this.dialogModule.openDialog(e,t)},t.prototype.closeDialog=function(){this.dialogModule.closeDialog()},t.prototype.addCard=function(e,t){this.crudModule.addCard(e,t)},t.prototype.updateCard=function(e,t){this.crudModule.updateCard(e,t)},t.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},t.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},t.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},t.prototype.showColumn=function(e){this.actionModule.showColumn(e)},t.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},t.prototype.refreshUI=function(e,t){t=t||0,this.dataModule.refreshUI(e,t)},t.prototype.refreshHeader=function(){this.resetTemplates(["columnTemplate"]),this.layoutModule&&this.layoutModule.refreshHeaders(),this.renderTemplates()},t.prototype.destroy=function(){this.destroyModules(),[].slice.call(this.element.childNodes).forEach((function(e){(0,a.og)(e)}));var t=[M];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),(0,a.IV)([this.element],t),e.prototype.destroy.call(this)},Xt([(0,a.Z9)()],t.prototype,"cssClass",void 0),Xt([(0,a.Z9)("auto")],t.prototype,"width",void 0),Xt([(0,a.Z9)("auto")],t.prototype,"height",void 0),Xt([(0,a.Z9)([])],t.prototype,"dataSource",void 0),Xt([(0,a.Z9)()],t.prototype,"query",void 0),Xt([(0,a.Z9)()],t.prototype,"keyField",void 0),Xt([(0,a.Z9)("Column")],t.prototype,"constraintType",void 0),Xt([(0,a.Z9)([])],t.prototype,"externalDropId",void 0),Xt([(0,a.FE)([],E)],t.prototype,"columns",void 0),Xt([(0,a.Z9)(!0)],t.prototype,"allowKeyboard",void 0),Xt([(0,a.FE)([],F)],t.prototype,"stackedHeaders",void 0),Xt([(0,a.Zz)({},C)],t.prototype,"swimlaneSettings",void 0),Xt([(0,a.Zz)({},w)],t.prototype,"cardSettings",void 0),Xt([(0,a.Zz)({},R)],t.prototype,"sortSettings",void 0),Xt([(0,a.Zz)({},A)],t.prototype,"dialogSettings",void 0),Xt([(0,a.Z9)(!0)],t.prototype,"allowDragAndDrop",void 0),Xt([(0,a.Z9)(!1)],t.prototype,"enableTooltip",void 0),Xt([(0,a.Z9)(!1)],t.prototype,"showEmptyColumn",void 0),Xt([(0,a.Z9)(!1)],t.prototype,"enablePersistence",void 0),Xt([(0,a.Z9)()],t.prototype,"tooltipTemplate",void 0),Xt([(0,a.ju)()],t.prototype,"actionBegin",void 0),Xt([(0,a.ju)()],t.prototype,"actionComplete",void 0),Xt([(0,a.ju)()],t.prototype,"actionFailure",void 0),Xt([(0,a.ju)()],t.prototype,"created",void 0),Xt([(0,a.ju)()],t.prototype,"dataBinding",void 0),Xt([(0,a.ju)()],t.prototype,"dataBound",void 0),Xt([(0,a.ju)()],t.prototype,"cardClick",void 0),Xt([(0,a.ju)()],t.prototype,"cardDoubleClick",void 0),Xt([(0,a.ju)()],t.prototype,"queryCellInfo",void 0),Xt([(0,a.ju)()],t.prototype,"cardRendered",void 0),Xt([(0,a.ju)()],t.prototype,"dragStart",void 0),Xt([(0,a.ju)()],t.prototype,"drag",void 0),Xt([(0,a.ju)()],t.prototype,"dragStop",void 0),Xt([(0,a.ju)()],t.prototype,"dialogOpen",void 0),Xt([(0,a.ju)()],t.prototype,"dialogClose",void 0),Xt([(0,a.ju)()],t.prototype,"dataStateChange",void 0),Xt([(0,a.ju)()],t.prototype,"dataSourceChanged",void 0),t=Xt([a.Zl],t)}(a.wA),Jt=i(2619),$t=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ei=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={columns:"column",stackedHeaders:"stackedHeader"},i.immediateRender=!1,i.portals=[],i}return $t(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(Qt);(0,Jt.ef)(ei,[Jt.VZ,n.Component])}}]);
//# sourceMappingURL=25.6c9b2153.chunk.js.map